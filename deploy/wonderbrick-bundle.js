(()=>{var An=Object.create;var ge=Object.defineProperty;var Tn=Object.getOwnPropertyDescriptor;var Sn=Object.getOwnPropertyNames;var In=Object.getPrototypeOf,jn=Object.prototype.hasOwnProperty;var C=(e,t)=>()=>(e&&(t=e(e=0)),t);var ee=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),le=(e,t)=>{for(var n in t)ge(e,n,{get:t[n],enumerable:!0})},at=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Sn(t))!jn.call(e,s)&&s!==n&&ge(e,s,{get:()=>t[s],enumerable:!(i=Tn(t,s))||i.enumerable});return e};var ot=(e,t,n)=>(n=e!=null?An(In(e)):{},at(t||!e||!e.__esModule?ge(n,"default",{value:e,enumerable:!0}):n,e)),$=e=>at(ge({},"__esModule",{value:!0}),e);var ct=C(()=>{});function En(e){console.log("Allocating temp mem:",e),U=e,S&&_free(S),S=_malloc(U),On()}function Ne(e){U>=e||En(Math.ceil(e/1024)*1024)}function On(){g=new Float32Array(HEAP8.buffer,S,U>>2),Ce=new Int32Array(HEAP8.buffer,S,U>>2),X=new Uint32Array(HEAP8.buffer,S,U>>2),_e=new Uint16Array(HEAP8.buffer,S,U>>1),xt=new Uint8Array(HEAP8.buffer,S,U)}function Pn(e){return Ne(e*2),_e}function Rn(e){return Ne(e*4),g}function Fe(e){return e&&(typeof e=="string"||e.constructor===String)}function Ve(e){let t=_t[e]||(_t[e]=new Y(e));return t.objectId=e,t}function ye(e,t,n){if(n<0)return null;let i=lt[t]||(lt[t]=[]);if(i[n])return i[n];let s;if(e=="collision")s=new he(t,n);else if(e=="text")s=new ke(t,n);else if(e=="view")s=new We(t,n);else if(e=="mesh")s=new Be(t,n);else if(e=="input")s=new De(t,n);else if(e=="light")s=new He(t,n);else if(e=="animation")s=new ze(t,n);else if(e=="physx")s=new be(t,n);else{let o=_WL._componentTypeIndices[e],l=_WL._componentTypes[o];s=new l}return s._manager=t,s._id=n,i[n]=s,s}var lt,_t,Ln,D,V,ht,dt,ft,pt,q,ut,vt,we,mt,re,W,B,gt,xe,te,S,U,g,Ce,X,_e,xt,Fn,H,he,ke,We,De,He,ze,Be,be,N,Q,Ue,J,ne,de,Cn,ie,Y,Me,yt=C(()=>{lt={},_t=[],Ln=["_id","_manager","type","_type","active"];(function(e){e[e.Bool=2]="Bool",e[e.Int=4]="Int",e[e.Float=8]="Float",e[e.String=16]="String",e[e.Enum=32]="Enum",e[e.Object=64]="Object",e[e.Mesh=128]="Mesh",e[e.Texture=256]="Texture",e[e.Material=512]="Material",e[e.Animation=1024]="Animation",e[e.Skin=2048]="Skin"})(D||(D={}));V=new Array(6);V[D.Bool]=!1;V[D.Int]=0;V[D.Float]=0;V[D.String]="";V[D.Enum]=0;V[D.Object]=null;V[D.Mesh]=null;V[D.Texture]=null;V[D.Material]=null;V[D.Animation]=null;V[D.Skin]=null;(function(e){e[e.Sphere=0]="Sphere",e[e.AxisAlignedBox=1]="AxisAlignedBox",e[e.Box=2]="Box"})(ht||(ht={}));(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=3]="Right"})(dt||(dt={}));(function(e){e[e.Line=1]="Line",e[e.Middle=2]="Middle",e[e.Top=3]="Top",e[e.Bottom=4]="Bottom"})(ft||(ft={}));(function(e){e[e.None=0]="None",e[e.Outline=1]="Outline"})(pt||(pt={}));(function(e){e[e.Head=0]="Head",e[e.EyeLeft=1]="EyeLeft",e[e.EyeRight=2]="EyeRight",e[e.ControllerLeft=3]="ControllerLeft",e[e.ControllerRight=4]="ControllerRight",e[e.RayLeft=5]="RayLeft",e[e.RayRight=6]="RayRight"})(q||(q={}));(function(e){e[e.Point=1]="Point",e[e.Spot=2]="Spot",e[e.Sun=3]="Sun"})(ut||(ut={}));(function(e){e[e.Playing=1]="Playing",e[e.Paused=2]="Paused",e[e.Stopped=3]="Stopped"})(vt||(vt={}));(function(e){e[e.Force=0]="Force",e[e.Impulse=1]="Impulse",e[e.VelocityChange=2]="VelocityChange",e[e.Acceleration=3]="Acceleration"})(we||(we={}));(function(e){e[e.Touch=0]="Touch",e[e.TouchLost=1]="TouchLost",e[e.TriggerTouch=2]="TriggerTouch",e[e.TriggerTouchLost=3]="TriggerTouchLost"})(mt||(mt={}));(function(e){e[e.None=0]="None",e[e.Sphere=1]="Sphere",e[e.Capsule=2]="Capsule",e[e.Box=3]="Box",e[e.Plane=4]="Plane",e[e.ConvexMesh=5]="ConvexMesh",e[e.TriangleMesh=6]="TriangleMesh"})(re||(re={}));(function(e){e[e.Position=0]="Position",e[e.Tangent=1]="Tangent",e[e.Normal=2]="Normal",e[e.TextureCoordinate=3]="TextureCoordinate",e[e.Color=4]="Color",e[e.JointId=5]="JointId",e[e.JointWeight=6]="JointWeight",e[e.SecondaryJointId=7]="SecondaryJointId",e[e.SecondaryJointWeight=8]="SecondaryJointWeight"})(W||(W={}));(function(e){e[e.UnsignedInt=0]="UnsignedInt",e[e.Int=1]="Int",e[e.Float=2]="Float",e[e.Sampler=3]="Sampler",e[e.Font=4]="Font"})(B||(B={}));gt=null,te=[],S=null,U=0,g=null,Ce=null,X=null,_e=null,xt=null;Fn=[0,1,0],H=class{constructor(t=-1,n=-1){this._manager=t,this._id=n,this._object=null,this._type=null}get type(){return this._type||Y._typeNameFor(this._manager)}get object(){if(!this._object){let t=_wl_component_get_object(this._manager,this._id);this._object=Ve(t)}return this._object}set active(t){_wl_component_setActive(this._manager,this._id,t)}get active(){return _wl_component_isActive(this._manager,this._id)!=0}destroy(){_wl_component_remove(this._manager,this._id),this._manager=void 0,this._id=void 0}equals(t){return t?this._manager==t._manager&&this._id==t._id:!1}},he=class extends H{get collider(){return _wl_collision_component_get_collider(this._id)}set collider(t){_wl_collision_component_set_collider(this._id,t)}get extents(){return new Float32Array(HEAPF32.buffer,_wl_collision_component_get_extents(this._id),3)}set extents(t){this.extents.set(t)}get group(){return _wl_collision_component_get_group(this._id)}set group(t){_wl_collision_component_set_group(this._id,t)}queryOverlaps(){let t=_wl_collision_component_query_overlaps(this._id,S,U>>1),n=new Array(t);for(let i=0;i<t;++i)n[i]=new he(this._manager,_e[i]);return n}},ke=class extends H{get alignment(){return _wl_text_component_get_horizontal_alignment(this._id)}set alignment(t){_wl_text_component_set_horizontal_alignment(this._id,t)}get justification(){return _wl_text_component_get_vertical_alignment(this._id)}set justification(t){_wl_text_component_set_vertical_alignment(this._id,t)}get characterSpacing(){return _wl_text_component_get_character_spacing(this._id)}set characterSpacing(t){_wl_text_component_set_character_spacing(this._id,t)}get lineSpacing(){return _wl_text_component_get_line_spacing(this._id)}set lineSpacing(t){_wl_text_component_set_line_spacing(this._id,t)}get effect(){return _wl_text_component_get_effect(this._id)}set effect(t){_wl_text_component_set_effect(this._id,t)}get text(){return UTF8ToString(_wl_text_component_get_text(this._id))}set text(t){let n=lengthBytesUTF8(t)+1,i=_malloc(n);stringToUTF8(t,i,n),_wl_text_component_set_text(this._id,i),_free(i)}set material(t){let n=t?t._index:0;_wl_text_component_set_material(this._id,n)}get material(){let t=_wl_text_component_get_material(this._id);return t>0?new J(t):null}},We=class extends H{get projectionMatrix(){return new Float32Array(HEAPF32.buffer,_wl_view_component_get_projection_matrix(this._id),16)}get near(){return _wl_view_component_get_near(this._id)}set near(t){_wl_view_component_set_near(this._id,t)}get far(){return _wl_view_component_get_far(this._id)}set far(t){_wl_view_component_set_far(this._id,t)}get fov(){return _wl_view_component_get_fov(this._id)}set fov(t){_wl_view_component_set_fov(this._id,t)}},De=class extends H{get inputType(){return _wl_input_component_get_type(this._id)}set inputType(t){_wl_input_component_set_type(this._id,t)}get xrInputSource(){if(gt){for(let t of gt.inputSources)if(t.handedness==this.handedness)return t}return null}get handedness(){let t=this.inputType;return t==q.ControllerRight||t==q.RayRight||t==q.EyeRight?"right":t==q.ControllerLeft||t==q.RayLeft||t==q.EyeLeft?"left":null}},He=class extends H{get color(){return new Float32Array(HEAPF32.buffer,_wl_light_component_get_color(this._id),4)}get lightType(){return _wl_light_component_get_type(this._id)}set lightType(t){_wl_light_component_set_type(this._id,t)}},ze=class extends H{set animation(t){_wl_animation_component_set_animation(this._id,t._index)}get animation(){return new ie(_wl_animation_component_get_animation(this._id))}set playCount(t){_wl_animation_component_set_playCount(this._id,t)}get playCount(){return _wl_animation_component_get_playCount(this._id)}set speed(t){_wl_animation_component_set_speed(this._id,t)}get speed(){return _wl_animation_component_get_speed(this._id)}get state(){return _wl_animation_component_state(this._id)}play(){_wl_animation_component_play(this._id)}stop(){_wl_animation_component_stop(this._id)}pause(){_wl_animation_component_pause(this._id)}},Be=class extends H{set material(t){_wl_mesh_component_set_material(this._id,t?t._index:0)}get material(){let t=_wl_mesh_component_get_material(this._id);return t>0?new J(t):null}get mesh(){return new Q(_wl_mesh_component_get_mesh(this._id))}set mesh(t){_wl_mesh_component_set_mesh(this._id,t?t._index:0)}get skin(){return new Me(_wl_mesh_component_get_skin(this._id))}set skin(t){_wl_mesh_component_set_skin(this._id,t._index)}},be=class extends H{set static(t){_wl_physx_component_set_static(this._id,t)}get static(){return!!_wl_physx_component_get_static(this._id)}set kinematic(t){_wl_physx_component_set_kinematic(this._id,t)}get kinematic(){return!!_wl_physx_component_get_kinematic(this._id)}set shape(t){_wl_physx_component_set_shape(this._id,t)}get shape(){return _wl_physx_component_get_shape(this._id)}set shapeData(t){t==null||![re.TriangleMesh,re.ConvexMesh].includes(this.shape)||_wl_physx_component_set_shape_data(this._id,t.index)}get shapeData(){return[re.TriangleMesh,re.ConvexMesh].includes(this.shape)?{index:_wl_physx_component_get_shape_data(this._id)}:null}set extents(t){this.extents.set(t)}get extents(){let t=_wl_physx_component_get_extents(this._id);return new Float32Array(HEAPF32.buffer,t,3)}get staticFriction(){return _wl_physx_component_get_staticFriction(this._id)}set staticFriction(t){_wl_physx_component_set_staticFriction(this._id,t)}get dynamicFriction(){return _wl_physx_component_get_dynamicFriction(this._id)}set dynamicFriction(t){_wl_physx_component_set_dynamicFriction(this._id,t)}get bounciness(){return _wl_physx_component_get_bounciness(this._id)}set bounciness(t){_wl_physx_component_set_bounciness(this._id,t)}get linearDamping(){return _wl_physx_component_get_linearDamping(this._id)}set linearDamping(t){_wl_physx_component_set_linearDamping(this._id,t)}get angularDamping(){return _wl_physx_component_get_angularDamping(this._id)}set angularDamping(t){_wl_physx_component_set_angularDamping(this._id,t)}set linearVelocity(t){_wl_physx_component_set_linearVelocity(this._id,t[0],t[1],t[2])}get linearVelocity(){return _wl_physx_component_get_linearVelocity(this._id,S),new Float32Array(HEAPF32.buffer,S,3)}set angularVelocity(t){_wl_physx_component_set_angularVelocity(this._id,t[0],t[1],t[2])}get angularVelocity(){return _wl_physx_component_get_angularVelocity(this._id,S),new Float32Array(HEAPF32.buffer,S,3)}set mass(t){_wl_physx_component_set_mass(this._id,t)}get mass(){return _wl_physx_component_get_mass(this._id)}set massSpaceInteriaTensor(t){_wl_physx_component_set_massSpaceInertiaTensor(this._id,t[0],t[1],t[2])}addForce(t,n,i,s,o){n=n||we.Force,s?_wl_physx_component_addForceAt(this._id,t[0],t[1],t[2],n,!!i,s[0],s[1],s[2],!!o):_wl_physx_component_addForce(this._id,t[0],t[1],t[2],n,!!i)}addTorque(t,n=we.Force){_wl_physx_component_addTorque(this._id,t[0],t[1],t[2],n)}onCollision(t){return this.onCollisionWith(this,t)}onCollisionWith(t,n){return xe._callbacks[this._id]=xe._callbacks[this._id]||[],xe._callbacks[this._id].push(n),_wl_physx_component_addCallback(this._id,t._id||this._id)}removeCollisionCallback(t){let n=_wl_physx_component_removeCallback(this._id,t);n&&xe._callbacks[this._id].splice(-n)}};for(let e of["static","extents","staticFriction","dynamicFriction","bounciness","linearDamping","angularDamping","shape","shapeData","kinematic","linearVelocity","angularVelocity","mass"])Object.defineProperty(be.prototype,e,{enumerable:!0});(function(e){e[e.UnsignedByte=1]="UnsignedByte",e[e.UnsignedShort=2]="UnsignedShort",e[e.UnsignedInt=4]="UnsignedInt"})(N||(N={}));Q=class{static get VERTEX_FLOAT_SIZE(){return 3+3+2}static get VERTEX_SIZE(){return this.VERTEX_FLOAT_SIZE*4}static get POS(){return{X:0,Y:1,Z:2}}static get TEXCOORD(){return{U:3,V:4}}static get NORMAL(){return{X:5,Y:6,Z:7}}constructor(t){if(typeof t=="object"){if(!t.vertexCount&&t.vertexData&&(t.vertexCount=t.vertexData.length/Q.VERTEX_FLOAT_SIZE),!t.vertexCount)throw new Error("Missing parameter 'vertexCount'");let n=0,i=0,s=0;if(t.indexData)switch(i=t.indexType||N.UnsignedShort,s=t.indexData.length*i,n=_malloc(s),i){case N.UnsignedByte:HEAPU8.set(t.indexData,n);break;case N.UnsignedShort:HEAPU16.set(t.indexData,n>>1);break;case N.UnsignedInt:HEAPU32.set(t.indexData,n>>2);break}let{skinned:o=!1}=t;if(this._index=_wl_mesh_create(n,s,i,t.vertexCount,o),t.vertexData){let l=this.attribute(W.Position),_=this.attribute(W.Normal),h=this.attribute(W.TextureCoordinate);for(let p=0;p<t.vertexCount;++p){let r=p*Q.VERTEX_FLOAT_SIZE;l.set(p,t.vertexData.subarray(r,r+3)),h?.set(p,t.vertexData.subarray(r+3,r+5)),_?.set(p,t.vertexData.subarray(r+5,r+8))}}}else this._index=t}get vertexData(){let t=_wl_mesh_get_vertexData(this._index,S);return new Float32Array(HEAPF32.buffer,t,Q.VERTEX_FLOAT_SIZE*HEAPU32[S/4])}get vertexCount(){return _wl_mesh_get_vertexCount(this._index)}get indexData(){let t=_wl_mesh_get_indexData(this._index,S,S+4);if(t===null)return null;let n=HEAPU32[S/4];switch(HEAPU32[S/4+1]){case N.UnsignedByte:return new Uint8Array(HEAPU8.buffer,t,n);case N.UnsignedShort:return new Uint16Array(HEAPU16.buffer,t,n);case N.UnsignedInt:return new Uint32Array(HEAPU32.buffer,t,n)}return null}update(){_wl_mesh_update(this._index)}getBoundingSphere(t=new Float32Array(4)){return _wl_mesh_get_boundingSphere(this._index,S),t[0]=g[0],t[1]=g[1],t[2]=g[2],t[3]=g[3],t}attribute(t){if(typeof t!="number")throw new TypeError("Expected number, but got "+typeof t);if(_wl_mesh_get_attribute(this._index,t,S),X[0]==255)return null;let n=new Ue(t);return n._attribute=X[0],n._offset=X[1],n._stride=X[2],n._formatSize=X[3],n._componentCount=X[4],n.length=this.vertexCount,n}destroy(){_wl_mesh_destroy(this._index)}},Ue=class{constructor(t=W.Position){switch(this._attribute=-1,this._offset=0,this._stride=0,this._formatSize=0,this._componentCount=0,this.length=0,t){case W.Position:case W.Normal:case W.TextureCoordinate:case W.Tangent:case W.Color:case W.JointWeight:case W.SecondaryJointWeight:this._bufferType=Float32Array,this._tempBufferGetter=Rn;break;case W.JointId:case W.SecondaryJointId:this._bufferType=Uint16Array,this._tempBufferGetter=Pn;break;default:throw new Error(`Invalid attribute accessor type: ${t}`)}}createArray(t=1){return t=t>this.length?this.length:t,new this._bufferType(t*this._componentCount)}get(t,n=this.createArray()){if(n.length%this._componentCount!==0)throw new Error(`out.length, ${n.length} is not a multiple of the attribute vector components, ${this._componentCount}`);let i=this._tempBufferGetter(n.length),s=this._bufferType.BYTES_PER_ELEMENT,o=s*n.length,l=this._componentCount*s;_wl_mesh_get_attribute_values(this._attribute,this._formatSize,this._offset+t*this._stride,this._stride,l,i.byteOffset,o);for(let _=0;_<n.length;++_)n[_]=i[_];return n}set(t,n){if(n.length%this._componentCount!==0)throw new Error(`out.length, ${n.length} is not a multiple of the attribute vector components, ${this._componentCount}`);let i=this._bufferType.BYTES_PER_ELEMENT,s=i*n.length,o=this._componentCount*i;if(n.buffer!=HEAPU8.buffer){let l=this._tempBufferGetter(n.length);l.set(n),n=l}return _wl_mesh_set_attribute_values(this._attribute,o,n.byteOffset,s,this._formatSize,this._offset+t*this._stride,this._stride),this}},J=class{constructor(t){if(typeof t!="number"){if(!t?.pipeline)throw new Error("Missing parameter 'pipeline'");let n=t.pipeline,i=lengthBytesUTF8(n)+1;if(stringToUTF8(n,S,i),this._index=_wl_material_create(S),this._index<0)throw new Error(`No such pipeline '${n}'`)}else this._index=t;if(this._definition=_wl_material_get_definition(this._index),!_WL._materialDefinitions[this._definition])throw new Error(`Material Definition ${this._definition} not found for material with index ${this._index}`);return new Proxy(this,{get(n,i){let o=_WL._materialDefinitions[n._definition].get(i);if(!o)return n[i];if(_wl_material_get_param_value(n._index,o.index,S)){let l=o.type;switch(l.type){case B.UnsignedInt:return l.componentCount==1?X[0]:new Uint32Array(HEAPU32.buffer,S,l.componentCount);case B.Int:return l.componentCount==1?Ce[0]:new Int32Array(HEAP32.buffer,S,l.componentCount);case B.Float:return l.componentCount==1?g[0]:new Float32Array(HEAPF32.buffer,S,l.componentCount);case B.Sampler:return new de(Ce[0]);default:throw new Error(`Invalid type ${l} on parameter ${o.index} for material ${n._index}`)}}},set(n,i,s){let l=_WL._materialDefinitions[n._definition].get(i);if(!l)return n[i]=s,!0;switch(l.type.type){case B.UnsignedInt:case B.Int:case B.Sampler:let h=s instanceof de?s.id:s;_wl_material_set_param_value_uint(n._index,l.index,h);break;case B.Float:let p=1;if(typeof s=="number")g[0]=s;else{p=s.length;for(let r=0;r<p;++r)g[r]=s[r]}_wl_material_set_param_value_float(n._index,l.index,S,p);break;case B.Font:throw new Error("Setting font properties is currently unsupported.")}return!0}})}get shader(){return UTF8ToString(_wl_material_get_shader(this._index))}clone(){let t=_wl_material_clone(this._index);return t>0?new J(t):null}static wrap(t){return t>0?new J(t):null}},ne=null,de=class{constructor(t){if(this._id=0,this._imageIndex=void 0,t instanceof HTMLImageElement||t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement){let n=te.length;te.push(t),this._imageIndex=n,this._id=_wl_renderer_addImage(n)}else this._id=t;Cn[this._id]=this}get valid(){return this._id>=0}get id(){return this._id}update(){this.valid&&_wl_renderer_updateImage(this._id,this._imageIndex)}get width(){return _wl_texture_width(this._id)}get height(){return _wl_texture_height(this._id)}updateSubImage(t,n,i,s){var o;if(!this.valid)return;ne||(ne=document.createElement("canvas"));let l=te[this._imageIndex];if(l){ne.width=i,ne.height=s,(o=ne.getContext("2d"))===null||o===void 0||o.drawImage(l,t,n,i,s,0,0,i,s),te[this._imageIndex]=ne;try{_wl_renderer_updateImage(this._id,this._imageIndex,t,(l.videoHeight||l.height)-n-s)}finally{te[this._imageIndex]=l}}}destroy(){_wl_texture_destroy(this._id),this._imageIndex&&(te[this._imageIndex]=null,this._imageIndex=void 0)}},Cn={load:function(e,t){let n=new Image;return t!==void 0&&(n.crossOrigin=t),n.src=e,new Promise((i,s)=>{n.onload=function(){let o=new de(n);o.valid||s("Failed to add image "+n.src+" to texture atlas. Probably incompatible format."),i(o)}})}},ie=class{constructor(t){this._index=t}get duration(){return _wl_animation_get_duration(this._index)}get trackCount(){return _wl_animation_get_trackCount(this._index)}retarget(t){if(t instanceof Me){let s=_wl_animation_retargetToSkin(this._index,t._index);return new ie(s)}if(t.length!=this.trackCount)throw Error("Expected "+this.trackCount.toString()+" targets, but got "+t.length.toString());let n=_malloc(2*t.length);for(let s=0;s<t.length;++s)HEAPU16[n>>1+s]=t[s].objectId;let i=_wl_animation_retarget(this._index,n);return _free(n),new ie(i)}},Y=class{constructor(t){this.objectId=t}get name(){return UTF8ToString(_wl_object_name(this.objectId))}set name(t){let n=lengthBytesUTF8(t)+1,i=_malloc(n);stringToUTF8(t,i,n),_wl_object_set_name(this.objectId,i),_free(i)}get parent(){let t=_wl_object_parent(this.objectId);return t==0?null:Ve(t)}get children(){let t=_wl_object_get_children_count(this.objectId);if(t===0)return[];Ne(t*2),_wl_object_get_children(this.objectId,S,U>>1);let n=new Array(t);for(let i=0;i<t;++i)n[i]=Ve(_e[i]);return n}set parent(t){_wl_object_set_parent(this.objectId,t==null?0:t.objectId)}resetTransform(){_wl_object_reset_translation_rotation(this.objectId),_wl_object_reset_scaling(this.objectId)}resetTranslationRotation(){_wl_object_reset_translation_rotation(this.objectId)}resetRotation(){_wl_object_reset_rotation(this.objectId)}resetTranslation(){_wl_object_reset_translation(this.objectId)}resetScaling(){_wl_object_reset_scaling(this.objectId)}translate(t){_wl_object_translate(this.objectId,t[0],t[1],t[2])}translateObject(t){_wl_object_translate_obj(this.objectId,t[0],t[1],t[2])}translateWorld(t){_wl_object_translate_world(this.objectId,t[0],t[1],t[2])}rotateAxisAngleDeg(t,n){_wl_object_rotate_axis_angle(this.objectId,t[0],t[1],t[2],n)}rotateAxisAngleRad(t,n){_wl_object_rotate_axis_angle_rad(this.objectId,t[0],t[1],t[2],n)}rotateAxisAngleDegObject(t,n){_wl_object_rotate_axis_angle_obj(this.objectId,t[0],t[1],t[2],n)}rotateAxisAngleRadObject(t,n){_wl_object_rotate_axis_angle_rad_obj(this.objectId,t[0],t[1],t[2],n)}rotate(t){_wl_object_rotate_quat(this.objectId,t[0],t[1],t[2],t[3])}rotateObject(t){_wl_object_rotate_quat_obj(this.objectId,t[0],t[1],t[2],t[3])}scale(t){_wl_object_scale(this.objectId,t[0],t[1],t[2])}get transformLocal(){return new Float32Array(HEAPF32.buffer,_wl_object_trans_local(this.objectId),8)}set transformLocal(t){this.transformLocal.set(t),this.setDirty()}getTranslationLocal(t){return _wl_object_get_translation_local(this.objectId,S),t[0]=g[0],t[1]=g[1],t[2]=g[2],t}getTranslationWorld(t){return _wl_object_get_translation_world(this.objectId,S),t[0]=g[0],t[1]=g[1],t[2]=g[2],t}setTranslationLocal(t){_wl_object_set_translation_local(this.objectId,t[0],t[1],t[2])}setTranslationWorld(t){_wl_object_set_translation_world(this.objectId,t[0],t[1],t[2])}get transformWorld(){return new Float32Array(HEAPF32.buffer,_wl_object_trans_world(this.objectId),8)}set transformWorld(t){this.transformWorld.set(t),_wl_object_trans_world_to_local(this.objectId)}get scalingLocal(){return new Float32Array(HEAPF32.buffer,_wl_object_scaling_local(this.objectId),3)}set scalingLocal(t){this.scalingLocal.set(t),this.setDirty()}get scalingWorld(){return new Float32Array(HEAPF32.buffer,_wl_object_scaling_world(this.objectId),3)}set scalingWorld(t){this.scalingWorld.set(t),_wl_object_scaling_world_to_local(this.objectId)}get rotationLocal(){return this.transformLocal.subarray(0,4)}get rotationWorld(){return this.transformWorld.subarray(0,4)}set rotationLocal(t){_wl_object_set_rotation_local(this.objectId,t[0],t[1],t[2],t[3])}set rotationWorld(t){_wl_object_set_rotation_world(this.objectId,t[0],t[1],t[2],t[3])}getForward(t){return t[0]=0,t[1]=0,t[2]=-1,this.transformVectorWorld(t),t}getUp(t){return t[0]=0,t[1]=1,t[2]=0,this.transformVectorWorld(t),t}getRight(t){return t[0]=1,t[1]=0,t[2]=0,this.transformVectorWorld(t),t}transformVectorWorld(t,n){return n=n||t,g[0]=n[0],g[1]=n[1],g[2]=n[2],_wl_object_transformVectorWorld(this.objectId,S),t[0]=g[0],t[1]=g[1],t[2]=g[2],t}transformVectorLocal(t,n){return n=n||t,g[0]=n[0],g[1]=n[1],g[2]=n[2],_wl_object_transformVectorLocal(this.objectId,S),t[0]=g[0],t[1]=g[1],t[2]=g[2],t}transformPointWorld(t,n){return n=n||t,g[0]=n[0],g[1]=n[1],g[2]=n[2],_wl_object_transformPointWorld(this.objectId,S),t[0]=g[0],t[1]=g[1],t[2]=g[2],t}transformPointLocal(t,n){return n=n||t,g[0]=n[0],g[1]=n[1],g[2]=n[2],_wl_object_transformPointLocal(this.objectId,S),t[0]=g[0],t[1]=g[1],t[2]=g[2],t}transformVectorInverseWorld(t,n){return n=n||t,g[0]=n[0],g[1]=n[1],g[2]=n[2],_wl_object_transformVectorInverseWorld(this.objectId,S),t[0]=g[0],t[1]=g[1],t[2]=g[2],t}transformVectorInverseLocal(t,n){return n=n||t,g[0]=n[0],g[1]=n[1],g[2]=n[2],_wl_object_transformVectorInverseLocal(this.objectId,S),t[0]=g[0],t[1]=g[1],t[2]=g[2],t}transformPointInverseWorld(t,n){return n=n||t,g[0]=n[0],g[1]=n[1],g[2]=n[2],_wl_object_transformPointInverseWorld(this.objectId,S),t[0]=g[0],t[1]=g[1],t[2]=g[2],t}transformPointInverseLocal(t,n){return n=n||t,g.set(n),_wl_object_transformPointInverseLocal(this.objectId,S),t[0]=g[0],t[1]=g[1],t[2]=g[2],t}toWorldSpaceTransform(t,n){return n=n||t,g.set(n),_wl_object_toWorldSpaceTransform(this.objectId,S),t[0]=g[0],t[1]=g[1],t[2]=g[2],t[3]=g[3],t[4]=g[4],t[5]=g[5],t[6]=g[6],t[7]=g[7],t}toLocalSpaceTransform(t,n){let i=this.parent;return n=n||t,i?i.toObjectSpaceTransform(n):t!==n&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7]),t}toObjectSpaceTransform(t,n){return n=n||t,g.set(n),_wl_object_toObjectSpaceTransform(this.objectId,S),t[0]=g[0],t[1]=g[1],t[2]=g[2],t[3]=g[3],t[4]=g[4],t[5]=g[5],t[6]=g[6],t[7]=g[7],t}lookAt(t,n=Fn){_wl_object_lookAt(this.objectId,t[0],t[1],t[2],n[0],n[1],n[2])}destroy(){_wl_scene_remove_object(this.objectId),this.objectId=null}setDirty(){_wl_object_set_dirty(this.objectId)}set active(t){let n=this.getComponents();for(let i of n)i.active=t}getComponent(t,n){let i=Fe(t)?t:t.TypeName,s=lengthBytesUTF8(i)+1,o=_malloc(s);stringToUTF8(i,o,s);let l=_wl_get_component_manager_index(o);if(_free(o),l<0){let h=_WL._componentTypeIndices[i],p=_wl_get_js_component_index(this.objectId,h,n||0);return p<0?null:_WL._components[p]}let _=_wl_get_component_id(this.objectId,l,n||0);return ye(i,l,_)}getComponents(t){let n=null,i=null;t&&(i=Fe(t)?t:t.TypeName,n=Y._typeIndexFor(i));let s=[],o=Math.floor(U/3*2),l=_wl_object_get_components(this.objectId,S,o),_=2*l;_wl_object_get_component_types(this.objectId,S+_,o);let h=Y._typeIndexFor("js");for(let p=0;p<l;++p){let r=xt[p+_],a=_e[p];if(r==h){let c=_WL._components[_wl_get_js_component_index_for_id(a)];(n===null||c.type==i)&&s.push(c);continue}if(n===null){let c=Y._typeNameFor(r);s.push(ye(c,r,a))}else r==n&&s.push(ye(i,n,a))}return s}addComponent(t,n){let i=Fe(t)?t:t.TypeName,s=Y._typeIndexFor(i),o=null,l=null;if(s<0){if(!(i in _WL._componentTypeIndices))throw new TypeError("Unknown component type '"+i+"'");let _=_wl_object_add_js_component(this.objectId,_WL._componentTypeIndices[i]);l=_wl_get_js_component_index_for_id(_),o=_WL._components[l]}else{let _=_wl_object_add_component(this.objectId,s);o=ye(i,s,_)}if(n!==void 0)for(let _ in n)Ln.includes(_)||(o[_]=n[_]);return s<0&&_wljs_component_init(l),(!n||!("active"in n&&!n.active))&&(o.active=!0),o}get changed(){return!!_wl_object_is_changed(this.objectId)}equals(t){return t?this.objectId==t.objectId:!1}static _typeIndexFor(t){let n=lengthBytesUTF8(t)+1,i=_malloc(n);stringToUTF8(t,i,n);let s=_wl_get_component_manager_index(i);return _free(i),s}static _typeNameFor(t){return UTF8ToString(_wl_component_manager_name(t))}},Me=class{constructor(t){this._index=t}get jointCount(){return _wl_skin_get_joint_count(this._index)}get jointIds(){return new Uint16Array(HEAPU16.buffer,_wl_skin_joint_ids(this._index),this.jointCount)}get inverseBindTransforms(){return new Float32Array(HEAPF32.buffer,_wl_skin_inverse_bind_transforms(this._index),8*this.jointCount)}get inverseBindScalings(){return new Float32Array(HEAPF32.buffer,_wl_skin_inverse_bind_scalings(this._index),3*this.jointCount)}}});var Ye=C(()=>{ct();yt()});var wt=ee(()=>{WL.registerComponent("finger-cursor",{},{init:function(){this.lastTarget=null},start:function(){this.tip=this.object.getComponent("collision")},update:function(){let e=this.tip.queryOverlaps(),t=null;for(let n=0;n<e.length;++n){let i=e[n].object,s=i.getComponent("cursor-target");if(s){s.equals(this.lastTarget)||(s.onHover(i,this),s.onClick(i,this)),t=s;break}}if(t)this.lastTarget=t;else{this.lastTarget&&this.lastTarget.onUnhover(this.lastTarget.object,this),this.lastTarget=null;return}}})});var bt=ee(()=>{WL.registerComponent("cursor-target",{},{init:function(){this.hoverFunctions=[],this.unHoverFunctions=[],this.clickFunctions=[],this.moveFunctions=[],this.downFunctions=[],this.upFunctions=[]},onHover:function(e,t){for(let n of this.hoverFunctions)n(e,t)},onUnhover:function(e,t){for(let n of this.unHoverFunctions)n(e,t)},onClick:function(e,t){for(let n of this.clickFunctions)n(e,t)},onMove:function(e,t){for(let n of this.moveFunctions)n(e,t)},onDown:function(e,t){for(let n of this.downFunctions)n(e,t)},onUp:function(e,t){for(let n of this.upFunctions)n(e,t)},addHoverFunction:function(e){this._validateCallback(e),this.hoverFunctions.push(e)},removeHoverFunction:function(e){this._validateCallback(e),this._removeItemOnce(this.hoverFunctions,e)},addUnHoverFunction:function(e){this._validateCallback(e),this.unHoverFunctions.push(e)},removeUnHoverFunction:function(e){this._validateCallback(e),this._removeItemOnce(this.unHoverFunctions,e)},addClickFunction:function(e){this._validateCallback(e),this.clickFunctions.push(e)},removeClickFunction:function(e){this._validateCallback(e),this._removeItemOnce(this.clickFunctions,e)},addMoveFunction:function(e){this._validateCallback(e),this.moveFunctions.push(e)},removeMoveFunction:function(e){this._validateCallback(e),this._removeItemOnce(this.moveFunctions,e)},addDownFunction:function(e){this._validateCallback(e),this.downFunctions.push(e)},removeDownFunction:function(e){this._validateCallback(e),this._removeItemOnce(this.downFunctions,e)},addUpFunction:function(e){this._validateCallback(e),this.upFunctions.push(e)},removeUpFunction:function(e){this._validateCallback(e),this._removeItemOnce(this.upFunctions,e)},_removeItemOnce:function(e,t){var n=e.indexOf(t);return n>-1&&e.splice(n,1),e},_validateCallback:function(e){if(typeof e!="function")throw new TypeError(this.object.name+".cursor-target: Argument needs to be a function")}})});var T,j,G,Ls,K=C(()=>{T=1e-6,j=typeof Float32Array<"u"?Float32Array:Array,G=Math.random,Ls=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)})});function Mt(){var e=new j(9);return j!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}var At=C(()=>{K()});var ae={};le(ae,{add:()=>gr,adjoint:()=>Nn,clone:()=>Dn,copy:()=>Hn,create:()=>Wn,determinant:()=>Yn,equals:()=>br,exactEquals:()=>wr,frob:()=>mr,fromQuat:()=>or,fromQuat2:()=>ir,fromRotation:()=>er,fromRotationTranslation:()=>It,fromRotationTranslationScale:()=>sr,fromRotationTranslationScaleOrigin:()=>ar,fromScaling:()=>Kn,fromTranslation:()=>Jn,fromValues:()=>zn,fromXRotation:()=>tr,fromYRotation:()=>nr,fromZRotation:()=>rr,frustum:()=>cr,getRotation:()=>Xe,getScaling:()=>jt,getTranslation:()=>qe,identity:()=>Tt,invert:()=>Vn,lookAt:()=>pr,mul:()=>Mr,multiply:()=>St,multiplyScalar:()=>xr,multiplyScalarAndAdd:()=>yr,ortho:()=>dr,orthoNO:()=>Et,orthoZO:()=>fr,perspective:()=>lr,perspectiveFromFieldOfView:()=>hr,perspectiveNO:()=>Lt,perspectiveZO:()=>_r,rotate:()=>Gn,rotateX:()=>Zn,rotateY:()=>$n,rotateZ:()=>Qn,scale:()=>Xn,set:()=>Bn,str:()=>vr,sub:()=>Ar,subtract:()=>Ot,targetTo:()=>ur,translate:()=>qn,transpose:()=>Un});function Wn(){var e=new j(16);return j!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Dn(e){var t=new j(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Hn(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function zn(e,t,n,i,s,o,l,_,h,p,r,a,c,d,u,v){var f=new j(16);return f[0]=e,f[1]=t,f[2]=n,f[3]=i,f[4]=s,f[5]=o,f[6]=l,f[7]=_,f[8]=h,f[9]=p,f[10]=r,f[11]=a,f[12]=c,f[13]=d,f[14]=u,f[15]=v,f}function Bn(e,t,n,i,s,o,l,_,h,p,r,a,c,d,u,v,f){return e[0]=t,e[1]=n,e[2]=i,e[3]=s,e[4]=o,e[5]=l,e[6]=_,e[7]=h,e[8]=p,e[9]=r,e[10]=a,e[11]=c,e[12]=d,e[13]=u,e[14]=v,e[15]=f,e}function Tt(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Un(e,t){if(e===t){var n=t[1],i=t[2],s=t[3],o=t[6],l=t[7],_=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=o,e[11]=t[14],e[12]=s,e[13]=l,e[14]=_}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function Vn(e,t){var n=t[0],i=t[1],s=t[2],o=t[3],l=t[4],_=t[5],h=t[6],p=t[7],r=t[8],a=t[9],c=t[10],d=t[11],u=t[12],v=t[13],f=t[14],m=t[15],x=n*_-i*l,y=n*h-s*l,w=n*p-o*l,b=i*h-s*_,M=i*p-o*_,L=s*p-o*h,A=r*v-a*u,E=r*f-c*u,O=r*m-d*u,F=a*f-c*v,R=a*m-d*v,P=c*m-d*f,I=x*P-y*R+w*F+b*O-M*E+L*A;return I?(I=1/I,e[0]=(_*P-h*R+p*F)*I,e[1]=(s*R-i*P-o*F)*I,e[2]=(v*L-f*M+m*b)*I,e[3]=(c*M-a*L-d*b)*I,e[4]=(h*O-l*P-p*E)*I,e[5]=(n*P-s*O+o*E)*I,e[6]=(f*w-u*L-m*y)*I,e[7]=(r*L-c*w+d*y)*I,e[8]=(l*R-_*O+p*A)*I,e[9]=(i*O-n*R-o*A)*I,e[10]=(u*M-v*w+m*x)*I,e[11]=(a*w-r*M-d*x)*I,e[12]=(_*E-l*F-h*A)*I,e[13]=(n*F-i*E+s*A)*I,e[14]=(v*y-u*b-f*x)*I,e[15]=(r*b-a*y+c*x)*I,e):null}function Nn(e,t){var n=t[0],i=t[1],s=t[2],o=t[3],l=t[4],_=t[5],h=t[6],p=t[7],r=t[8],a=t[9],c=t[10],d=t[11],u=t[12],v=t[13],f=t[14],m=t[15];return e[0]=_*(c*m-d*f)-a*(h*m-p*f)+v*(h*d-p*c),e[1]=-(i*(c*m-d*f)-a*(s*m-o*f)+v*(s*d-o*c)),e[2]=i*(h*m-p*f)-_*(s*m-o*f)+v*(s*p-o*h),e[3]=-(i*(h*d-p*c)-_*(s*d-o*c)+a*(s*p-o*h)),e[4]=-(l*(c*m-d*f)-r*(h*m-p*f)+u*(h*d-p*c)),e[5]=n*(c*m-d*f)-r*(s*m-o*f)+u*(s*d-o*c),e[6]=-(n*(h*m-p*f)-l*(s*m-o*f)+u*(s*p-o*h)),e[7]=n*(h*d-p*c)-l*(s*d-o*c)+r*(s*p-o*h),e[8]=l*(a*m-d*v)-r*(_*m-p*v)+u*(_*d-p*a),e[9]=-(n*(a*m-d*v)-r*(i*m-o*v)+u*(i*d-o*a)),e[10]=n*(_*m-p*v)-l*(i*m-o*v)+u*(i*p-o*_),e[11]=-(n*(_*d-p*a)-l*(i*d-o*a)+r*(i*p-o*_)),e[12]=-(l*(a*f-c*v)-r*(_*f-h*v)+u*(_*c-h*a)),e[13]=n*(a*f-c*v)-r*(i*f-s*v)+u*(i*c-s*a),e[14]=-(n*(_*f-h*v)-l*(i*f-s*v)+u*(i*h-s*_)),e[15]=n*(_*c-h*a)-l*(i*c-s*a)+r*(i*h-s*_),e}function Yn(e){var t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],l=e[5],_=e[6],h=e[7],p=e[8],r=e[9],a=e[10],c=e[11],d=e[12],u=e[13],v=e[14],f=e[15],m=t*l-n*o,x=t*_-i*o,y=t*h-s*o,w=n*_-i*l,b=n*h-s*l,M=i*h-s*_,L=p*u-r*d,A=p*v-a*d,E=p*f-c*d,O=r*v-a*u,F=r*f-c*u,R=a*f-c*v;return m*R-x*F+y*O+w*E-b*A+M*L}function St(e,t,n){var i=t[0],s=t[1],o=t[2],l=t[3],_=t[4],h=t[5],p=t[6],r=t[7],a=t[8],c=t[9],d=t[10],u=t[11],v=t[12],f=t[13],m=t[14],x=t[15],y=n[0],w=n[1],b=n[2],M=n[3];return e[0]=y*i+w*_+b*a+M*v,e[1]=y*s+w*h+b*c+M*f,e[2]=y*o+w*p+b*d+M*m,e[3]=y*l+w*r+b*u+M*x,y=n[4],w=n[5],b=n[6],M=n[7],e[4]=y*i+w*_+b*a+M*v,e[5]=y*s+w*h+b*c+M*f,e[6]=y*o+w*p+b*d+M*m,e[7]=y*l+w*r+b*u+M*x,y=n[8],w=n[9],b=n[10],M=n[11],e[8]=y*i+w*_+b*a+M*v,e[9]=y*s+w*h+b*c+M*f,e[10]=y*o+w*p+b*d+M*m,e[11]=y*l+w*r+b*u+M*x,y=n[12],w=n[13],b=n[14],M=n[15],e[12]=y*i+w*_+b*a+M*v,e[13]=y*s+w*h+b*c+M*f,e[14]=y*o+w*p+b*d+M*m,e[15]=y*l+w*r+b*u+M*x,e}function qn(e,t,n){var i=n[0],s=n[1],o=n[2],l,_,h,p,r,a,c,d,u,v,f,m;return t===e?(e[12]=t[0]*i+t[4]*s+t[8]*o+t[12],e[13]=t[1]*i+t[5]*s+t[9]*o+t[13],e[14]=t[2]*i+t[6]*s+t[10]*o+t[14],e[15]=t[3]*i+t[7]*s+t[11]*o+t[15]):(l=t[0],_=t[1],h=t[2],p=t[3],r=t[4],a=t[5],c=t[6],d=t[7],u=t[8],v=t[9],f=t[10],m=t[11],e[0]=l,e[1]=_,e[2]=h,e[3]=p,e[4]=r,e[5]=a,e[6]=c,e[7]=d,e[8]=u,e[9]=v,e[10]=f,e[11]=m,e[12]=l*i+r*s+u*o+t[12],e[13]=_*i+a*s+v*o+t[13],e[14]=h*i+c*s+f*o+t[14],e[15]=p*i+d*s+m*o+t[15]),e}function Xn(e,t,n){var i=n[0],s=n[1],o=n[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Gn(e,t,n,i){var s=i[0],o=i[1],l=i[2],_=Math.hypot(s,o,l),h,p,r,a,c,d,u,v,f,m,x,y,w,b,M,L,A,E,O,F,R,P,I,z;return _<T?null:(_=1/_,s*=_,o*=_,l*=_,h=Math.sin(n),p=Math.cos(n),r=1-p,a=t[0],c=t[1],d=t[2],u=t[3],v=t[4],f=t[5],m=t[6],x=t[7],y=t[8],w=t[9],b=t[10],M=t[11],L=s*s*r+p,A=o*s*r+l*h,E=l*s*r-o*h,O=s*o*r-l*h,F=o*o*r+p,R=l*o*r+s*h,P=s*l*r+o*h,I=o*l*r-s*h,z=l*l*r+p,e[0]=a*L+v*A+y*E,e[1]=c*L+f*A+w*E,e[2]=d*L+m*A+b*E,e[3]=u*L+x*A+M*E,e[4]=a*O+v*F+y*R,e[5]=c*O+f*F+w*R,e[6]=d*O+m*F+b*R,e[7]=u*O+x*F+M*R,e[8]=a*P+v*I+y*z,e[9]=c*P+f*I+w*z,e[10]=d*P+m*I+b*z,e[11]=u*P+x*I+M*z,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function Zn(e,t,n){var i=Math.sin(n),s=Math.cos(n),o=t[4],l=t[5],_=t[6],h=t[7],p=t[8],r=t[9],a=t[10],c=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*s+p*i,e[5]=l*s+r*i,e[6]=_*s+a*i,e[7]=h*s+c*i,e[8]=p*s-o*i,e[9]=r*s-l*i,e[10]=a*s-_*i,e[11]=c*s-h*i,e}function $n(e,t,n){var i=Math.sin(n),s=Math.cos(n),o=t[0],l=t[1],_=t[2],h=t[3],p=t[8],r=t[9],a=t[10],c=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*s-p*i,e[1]=l*s-r*i,e[2]=_*s-a*i,e[3]=h*s-c*i,e[8]=o*i+p*s,e[9]=l*i+r*s,e[10]=_*i+a*s,e[11]=h*i+c*s,e}function Qn(e,t,n){var i=Math.sin(n),s=Math.cos(n),o=t[0],l=t[1],_=t[2],h=t[3],p=t[4],r=t[5],a=t[6],c=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*s+p*i,e[1]=l*s+r*i,e[2]=_*s+a*i,e[3]=h*s+c*i,e[4]=p*s-o*i,e[5]=r*s-l*i,e[6]=a*s-_*i,e[7]=c*s-h*i,e}function Jn(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function Kn(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function er(e,t,n){var i=n[0],s=n[1],o=n[2],l=Math.hypot(i,s,o),_,h,p;return l<T?null:(l=1/l,i*=l,s*=l,o*=l,_=Math.sin(t),h=Math.cos(t),p=1-h,e[0]=i*i*p+h,e[1]=s*i*p+o*_,e[2]=o*i*p-s*_,e[3]=0,e[4]=i*s*p-o*_,e[5]=s*s*p+h,e[6]=o*s*p+i*_,e[7]=0,e[8]=i*o*p+s*_,e[9]=s*o*p-i*_,e[10]=o*o*p+h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function tr(e,t){var n=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function nr(e,t){var n=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function rr(e,t){var n=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function It(e,t,n){var i=t[0],s=t[1],o=t[2],l=t[3],_=i+i,h=s+s,p=o+o,r=i*_,a=i*h,c=i*p,d=s*h,u=s*p,v=o*p,f=l*_,m=l*h,x=l*p;return e[0]=1-(d+v),e[1]=a+x,e[2]=c-m,e[3]=0,e[4]=a-x,e[5]=1-(r+v),e[6]=u+f,e[7]=0,e[8]=c+m,e[9]=u-f,e[10]=1-(r+d),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function ir(e,t){var n=new j(3),i=-t[0],s=-t[1],o=-t[2],l=t[3],_=t[4],h=t[5],p=t[6],r=t[7],a=i*i+s*s+o*o+l*l;return a>0?(n[0]=(_*l+r*i+h*o-p*s)*2/a,n[1]=(h*l+r*s+p*i-_*o)*2/a,n[2]=(p*l+r*o+_*s-h*i)*2/a):(n[0]=(_*l+r*i+h*o-p*s)*2,n[1]=(h*l+r*s+p*i-_*o)*2,n[2]=(p*l+r*o+_*s-h*i)*2),It(e,t,n),e}function qe(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function jt(e,t){var n=t[0],i=t[1],s=t[2],o=t[4],l=t[5],_=t[6],h=t[8],p=t[9],r=t[10];return e[0]=Math.hypot(n,i,s),e[1]=Math.hypot(o,l,_),e[2]=Math.hypot(h,p,r),e}function Xe(e,t){var n=new j(3);jt(n,t);var i=1/n[0],s=1/n[1],o=1/n[2],l=t[0]*i,_=t[1]*s,h=t[2]*o,p=t[4]*i,r=t[5]*s,a=t[6]*o,c=t[8]*i,d=t[9]*s,u=t[10]*o,v=l+r+u,f=0;return v>0?(f=Math.sqrt(v+1)*2,e[3]=.25*f,e[0]=(a-d)/f,e[1]=(c-h)/f,e[2]=(_-p)/f):l>r&&l>u?(f=Math.sqrt(1+l-r-u)*2,e[3]=(a-d)/f,e[0]=.25*f,e[1]=(_+p)/f,e[2]=(c+h)/f):r>u?(f=Math.sqrt(1+r-l-u)*2,e[3]=(c-h)/f,e[0]=(_+p)/f,e[1]=.25*f,e[2]=(a+d)/f):(f=Math.sqrt(1+u-l-r)*2,e[3]=(_-p)/f,e[0]=(c+h)/f,e[1]=(a+d)/f,e[2]=.25*f),e}function sr(e,t,n,i){var s=t[0],o=t[1],l=t[2],_=t[3],h=s+s,p=o+o,r=l+l,a=s*h,c=s*p,d=s*r,u=o*p,v=o*r,f=l*r,m=_*h,x=_*p,y=_*r,w=i[0],b=i[1],M=i[2];return e[0]=(1-(u+f))*w,e[1]=(c+y)*w,e[2]=(d-x)*w,e[3]=0,e[4]=(c-y)*b,e[5]=(1-(a+f))*b,e[6]=(v+m)*b,e[7]=0,e[8]=(d+x)*M,e[9]=(v-m)*M,e[10]=(1-(a+u))*M,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function ar(e,t,n,i,s){var o=t[0],l=t[1],_=t[2],h=t[3],p=o+o,r=l+l,a=_+_,c=o*p,d=o*r,u=o*a,v=l*r,f=l*a,m=_*a,x=h*p,y=h*r,w=h*a,b=i[0],M=i[1],L=i[2],A=s[0],E=s[1],O=s[2],F=(1-(v+m))*b,R=(d+w)*b,P=(u-y)*b,I=(d-w)*M,z=(1-(c+m))*M,oe=(f+x)*M,ce=(u+y)*L,it=(f-x)*L,st=(1-(c+v))*L;return e[0]=F,e[1]=R,e[2]=P,e[3]=0,e[4]=I,e[5]=z,e[6]=oe,e[7]=0,e[8]=ce,e[9]=it,e[10]=st,e[11]=0,e[12]=n[0]+A-(F*A+I*E+ce*O),e[13]=n[1]+E-(R*A+z*E+it*O),e[14]=n[2]+O-(P*A+oe*E+st*O),e[15]=1,e}function or(e,t){var n=t[0],i=t[1],s=t[2],o=t[3],l=n+n,_=i+i,h=s+s,p=n*l,r=i*l,a=i*_,c=s*l,d=s*_,u=s*h,v=o*l,f=o*_,m=o*h;return e[0]=1-a-u,e[1]=r+m,e[2]=c-f,e[3]=0,e[4]=r-m,e[5]=1-p-u,e[6]=d+v,e[7]=0,e[8]=c+f,e[9]=d-v,e[10]=1-p-a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function cr(e,t,n,i,s,o,l){var _=1/(n-t),h=1/(s-i),p=1/(o-l);return e[0]=o*2*_,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o*2*h,e[6]=0,e[7]=0,e[8]=(n+t)*_,e[9]=(s+i)*h,e[10]=(l+o)*p,e[11]=-1,e[12]=0,e[13]=0,e[14]=l*o*2*p,e[15]=0,e}function Lt(e,t,n,i,s){var o=1/Math.tan(t/2),l;return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,s!=null&&s!==1/0?(l=1/(i-s),e[10]=(s+i)*l,e[14]=2*s*i*l):(e[10]=-1,e[14]=-2*i),e}function _r(e,t,n,i,s){var o=1/Math.tan(t/2),l;return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,s!=null&&s!==1/0?(l=1/(i-s),e[10]=s*l,e[14]=s*i*l):(e[10]=-1,e[14]=-i),e}function hr(e,t,n,i){var s=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),l=Math.tan(t.leftDegrees*Math.PI/180),_=Math.tan(t.rightDegrees*Math.PI/180),h=2/(l+_),p=2/(s+o);return e[0]=h,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=p,e[6]=0,e[7]=0,e[8]=-((l-_)*h*.5),e[9]=(s-o)*p*.5,e[10]=i/(n-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*n/(n-i),e[15]=0,e}function Et(e,t,n,i,s,o,l){var _=1/(t-n),h=1/(i-s),p=1/(o-l);return e[0]=-2*_,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*h,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*p,e[11]=0,e[12]=(t+n)*_,e[13]=(s+i)*h,e[14]=(l+o)*p,e[15]=1,e}function fr(e,t,n,i,s,o,l){var _=1/(t-n),h=1/(i-s),p=1/(o-l);return e[0]=-2*_,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*h,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=p,e[11]=0,e[12]=(t+n)*_,e[13]=(s+i)*h,e[14]=o*p,e[15]=1,e}function pr(e,t,n,i){var s,o,l,_,h,p,r,a,c,d,u=t[0],v=t[1],f=t[2],m=i[0],x=i[1],y=i[2],w=n[0],b=n[1],M=n[2];return Math.abs(u-w)<T&&Math.abs(v-b)<T&&Math.abs(f-M)<T?Tt(e):(r=u-w,a=v-b,c=f-M,d=1/Math.hypot(r,a,c),r*=d,a*=d,c*=d,s=x*c-y*a,o=y*r-m*c,l=m*a-x*r,d=Math.hypot(s,o,l),d?(d=1/d,s*=d,o*=d,l*=d):(s=0,o=0,l=0),_=a*l-c*o,h=c*s-r*l,p=r*o-a*s,d=Math.hypot(_,h,p),d?(d=1/d,_*=d,h*=d,p*=d):(_=0,h=0,p=0),e[0]=s,e[1]=_,e[2]=r,e[3]=0,e[4]=o,e[5]=h,e[6]=a,e[7]=0,e[8]=l,e[9]=p,e[10]=c,e[11]=0,e[12]=-(s*u+o*v+l*f),e[13]=-(_*u+h*v+p*f),e[14]=-(r*u+a*v+c*f),e[15]=1,e)}function ur(e,t,n,i){var s=t[0],o=t[1],l=t[2],_=i[0],h=i[1],p=i[2],r=s-n[0],a=o-n[1],c=l-n[2],d=r*r+a*a+c*c;d>0&&(d=1/Math.sqrt(d),r*=d,a*=d,c*=d);var u=h*c-p*a,v=p*r-_*c,f=_*a-h*r;return d=u*u+v*v+f*f,d>0&&(d=1/Math.sqrt(d),u*=d,v*=d,f*=d),e[0]=u,e[1]=v,e[2]=f,e[3]=0,e[4]=a*f-c*v,e[5]=c*u-r*f,e[6]=r*v-a*u,e[7]=0,e[8]=r,e[9]=a,e[10]=c,e[11]=0,e[12]=s,e[13]=o,e[14]=l,e[15]=1,e}function vr(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function mr(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function gr(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function Ot(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function xr(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function yr(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e[3]=t[3]+n[3]*i,e[4]=t[4]+n[4]*i,e[5]=t[5]+n[5]*i,e[6]=t[6]+n[6]*i,e[7]=t[7]+n[7]*i,e[8]=t[8]+n[8]*i,e[9]=t[9]+n[9]*i,e[10]=t[10]+n[10]*i,e[11]=t[11]+n[11]*i,e[12]=t[12]+n[12]*i,e[13]=t[13]+n[13]*i,e[14]=t[14]+n[14]*i,e[15]=t[15]+n[15]*i,e}function wr(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function br(e,t){var n=e[0],i=e[1],s=e[2],o=e[3],l=e[4],_=e[5],h=e[6],p=e[7],r=e[8],a=e[9],c=e[10],d=e[11],u=e[12],v=e[13],f=e[14],m=e[15],x=t[0],y=t[1],w=t[2],b=t[3],M=t[4],L=t[5],A=t[6],E=t[7],O=t[8],F=t[9],R=t[10],P=t[11],I=t[12],z=t[13],oe=t[14],ce=t[15];return Math.abs(n-x)<=T*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(i-y)<=T*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(s-w)<=T*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(o-b)<=T*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(l-M)<=T*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(_-L)<=T*Math.max(1,Math.abs(_),Math.abs(L))&&Math.abs(h-A)<=T*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(p-E)<=T*Math.max(1,Math.abs(p),Math.abs(E))&&Math.abs(r-O)<=T*Math.max(1,Math.abs(r),Math.abs(O))&&Math.abs(a-F)<=T*Math.max(1,Math.abs(a),Math.abs(F))&&Math.abs(c-R)<=T*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(d-P)<=T*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(u-I)<=T*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(v-z)<=T*Math.max(1,Math.abs(v),Math.abs(z))&&Math.abs(f-oe)<=T*Math.max(1,Math.abs(f),Math.abs(oe))&&Math.abs(m-ce)<=T*Math.max(1,Math.abs(m),Math.abs(ce))}var lr,dr,Mr,Ar,Ge=C(()=>{K();lr=Lt;dr=Et;Mr=St,Ar=Ot});var k={};le(k,{add:()=>jr,angle:()=>Gr,bezier:()=>zr,ceil:()=>Lr,clone:()=>Tr,copy:()=>Sr,create:()=>Ae,cross:()=>fe,dist:()=>ni,distance:()=>kt,div:()=>ti,divide:()=>Ct,dot:()=>Se,equals:()=>Jr,exactEquals:()=>Qr,floor:()=>Er,forEach:()=>si,fromValues:()=>Te,hermite:()=>Hr,inverse:()=>Wr,len:()=>$e,length:()=>Pt,lerp:()=>Dr,max:()=>Pr,min:()=>Or,mul:()=>ei,multiply:()=>Ft,negate:()=>kr,normalize:()=>Ze,random:()=>Br,rotateX:()=>Yr,rotateY:()=>qr,rotateZ:()=>Xr,round:()=>Rr,scale:()=>Fr,scaleAndAdd:()=>Cr,set:()=>Ir,sqrDist:()=>ri,sqrLen:()=>ii,squaredDistance:()=>Wt,squaredLength:()=>Dt,str:()=>$r,sub:()=>Kr,subtract:()=>Rt,transformMat3:()=>Vr,transformMat4:()=>Ur,transformQuat:()=>Nr,zero:()=>Zr});function Ae(){var e=new j(3);return j!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Tr(e){var t=new j(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Pt(e){var t=e[0],n=e[1],i=e[2];return Math.hypot(t,n,i)}function Te(e,t,n){var i=new j(3);return i[0]=e,i[1]=t,i[2]=n,i}function Sr(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ir(e,t,n,i){return e[0]=t,e[1]=n,e[2]=i,e}function jr(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Rt(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Ft(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function Ct(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function Lr(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function Er(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function Or(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function Pr(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function Rr(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function Fr(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function Cr(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e}function kt(e,t){var n=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2];return Math.hypot(n,i,s)}function Wt(e,t){var n=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2];return n*n+i*i+s*s}function Dt(e){var t=e[0],n=e[1],i=e[2];return t*t+n*n+i*i}function kr(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function Wr(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function Ze(e,t){var n=t[0],i=t[1],s=t[2],o=n*n+i*i+s*s;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function Se(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function fe(e,t,n){var i=t[0],s=t[1],o=t[2],l=n[0],_=n[1],h=n[2];return e[0]=s*h-o*_,e[1]=o*l-i*h,e[2]=i*_-s*l,e}function Dr(e,t,n,i){var s=t[0],o=t[1],l=t[2];return e[0]=s+i*(n[0]-s),e[1]=o+i*(n[1]-o),e[2]=l+i*(n[2]-l),e}function Hr(e,t,n,i,s,o){var l=o*o,_=l*(2*o-3)+1,h=l*(o-2)+o,p=l*(o-1),r=l*(3-2*o);return e[0]=t[0]*_+n[0]*h+i[0]*p+s[0]*r,e[1]=t[1]*_+n[1]*h+i[1]*p+s[1]*r,e[2]=t[2]*_+n[2]*h+i[2]*p+s[2]*r,e}function zr(e,t,n,i,s,o){var l=1-o,_=l*l,h=o*o,p=_*l,r=3*o*_,a=3*h*l,c=h*o;return e[0]=t[0]*p+n[0]*r+i[0]*a+s[0]*c,e[1]=t[1]*p+n[1]*r+i[1]*a+s[1]*c,e[2]=t[2]*p+n[2]*r+i[2]*a+s[2]*c,e}function Br(e,t){t=t||1;var n=G()*2*Math.PI,i=G()*2-1,s=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(n)*s,e[1]=Math.sin(n)*s,e[2]=i*t,e}function Ur(e,t,n){var i=t[0],s=t[1],o=t[2],l=n[3]*i+n[7]*s+n[11]*o+n[15];return l=l||1,e[0]=(n[0]*i+n[4]*s+n[8]*o+n[12])/l,e[1]=(n[1]*i+n[5]*s+n[9]*o+n[13])/l,e[2]=(n[2]*i+n[6]*s+n[10]*o+n[14])/l,e}function Vr(e,t,n){var i=t[0],s=t[1],o=t[2];return e[0]=i*n[0]+s*n[3]+o*n[6],e[1]=i*n[1]+s*n[4]+o*n[7],e[2]=i*n[2]+s*n[5]+o*n[8],e}function Nr(e,t,n){var i=n[0],s=n[1],o=n[2],l=n[3],_=t[0],h=t[1],p=t[2],r=s*p-o*h,a=o*_-i*p,c=i*h-s*_,d=s*c-o*a,u=o*r-i*c,v=i*a-s*r,f=l*2;return r*=f,a*=f,c*=f,d*=2,u*=2,v*=2,e[0]=_+r+d,e[1]=h+a+u,e[2]=p+c+v,e}function Yr(e,t,n,i){var s=[],o=[];return s[0]=t[0]-n[0],s[1]=t[1]-n[1],s[2]=t[2]-n[2],o[0]=s[0],o[1]=s[1]*Math.cos(i)-s[2]*Math.sin(i),o[2]=s[1]*Math.sin(i)+s[2]*Math.cos(i),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function qr(e,t,n,i){var s=[],o=[];return s[0]=t[0]-n[0],s[1]=t[1]-n[1],s[2]=t[2]-n[2],o[0]=s[2]*Math.sin(i)+s[0]*Math.cos(i),o[1]=s[1],o[2]=s[2]*Math.cos(i)-s[0]*Math.sin(i),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function Xr(e,t,n,i){var s=[],o=[];return s[0]=t[0]-n[0],s[1]=t[1]-n[1],s[2]=t[2]-n[2],o[0]=s[0]*Math.cos(i)-s[1]*Math.sin(i),o[1]=s[0]*Math.sin(i)+s[1]*Math.cos(i),o[2]=s[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function Gr(e,t){var n=e[0],i=e[1],s=e[2],o=t[0],l=t[1],_=t[2],h=Math.sqrt(n*n+i*i+s*s),p=Math.sqrt(o*o+l*l+_*_),r=h*p,a=r&&Se(e,t)/r;return Math.acos(Math.min(Math.max(a,-1),1))}function Zr(e){return e[0]=0,e[1]=0,e[2]=0,e}function $r(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function Qr(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function Jr(e,t){var n=e[0],i=e[1],s=e[2],o=t[0],l=t[1],_=t[2];return Math.abs(n-o)<=T*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-l)<=T*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-_)<=T*Math.max(1,Math.abs(s),Math.abs(_))}var Kr,ei,ti,ni,ri,$e,ii,si,Qe=C(()=>{K();Kr=Rt,ei=Ft,ti=Ct,ni=kt,ri=Wt,$e=Pt,ii=Dt,si=function(){var e=Ae();return function(t,n,i,s,o,l){var _,h;for(n||(n=3),i||(i=0),s?h=Math.min(s*n+i,t.length):h=t.length,_=i;_<h;_+=n)e[0]=t[_],e[1]=t[_+1],e[2]=t[_+2],o(e,e,l),t[_]=e[0],t[_+1]=e[1],t[_+2]=e[2];return t}}()});function ai(){var e=new j(4);return j!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Ht(e){var t=new j(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function zt(e,t,n,i){var s=new j(4);return s[0]=e,s[1]=t,s[2]=n,s[3]=i,s}function Bt(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Ut(e,t,n,i,s){return e[0]=t,e[1]=n,e[2]=i,e[3]=s,e}function Vt(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function Nt(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function Yt(e){var t=e[0],n=e[1],i=e[2],s=e[3];return Math.hypot(t,n,i,s)}function qt(e){var t=e[0],n=e[1],i=e[2],s=e[3];return t*t+n*n+i*i+s*s}function Xt(e,t){var n=t[0],i=t[1],s=t[2],o=t[3],l=n*n+i*i+s*s+o*o;return l>0&&(l=1/Math.sqrt(l)),e[0]=n*l,e[1]=i*l,e[2]=s*l,e[3]=o*l,e}function Gt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Zt(e,t,n,i){var s=t[0],o=t[1],l=t[2],_=t[3];return e[0]=s+i*(n[0]-s),e[1]=o+i*(n[1]-o),e[2]=l+i*(n[2]-l),e[3]=_+i*(n[3]-_),e}function $t(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function Qt(e,t){var n=e[0],i=e[1],s=e[2],o=e[3],l=t[0],_=t[1],h=t[2],p=t[3];return Math.abs(n-l)<=T*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(i-_)<=T*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(s-h)<=T*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(o-p)<=T*Math.max(1,Math.abs(o),Math.abs(p))}var Es,Jt=C(()=>{K();Es=function(){var e=ai();return function(t,n,i,s,o,l){var _,h;for(n||(n=4),i||(i=0),s?h=Math.min(s*n+i,t.length):h=t.length,_=i;_<h;_+=n)e[0]=t[_],e[1]=t[_+1],e[2]=t[_+2],e[3]=t[_+3],o(e,e,l),t[_]=e[0],t[_+1]=e[1],t[_+2]=e[2],t[_+3]=e[3];return t}}()});var ue={};le(ue,{add:()=>wi,calculateW:()=>hi,clone:()=>gi,conjugate:()=>ui,copy:()=>je,create:()=>pe,dot:()=>Le,equals:()=>Ii,exactEquals:()=>Si,exp:()=>tn,fromEuler:()=>vi,fromMat3:()=>rn,fromValues:()=>xi,getAngle:()=>_i,getAxisAngle:()=>li,identity:()=>ci,invert:()=>pi,len:()=>Ai,length:()=>Ee,lerp:()=>Mi,ln:()=>nn,mul:()=>bi,multiply:()=>en,normalize:()=>tt,pow:()=>di,random:()=>fi,rotateX:()=>Je,rotateY:()=>Ke,rotateZ:()=>et,rotationTo:()=>ji,scale:()=>sn,set:()=>yi,setAxes:()=>Ei,setAxisAngle:()=>Kt,slerp:()=>Ie,sqlerp:()=>Li,sqrLen:()=>Ti,squaredLength:()=>Oe,str:()=>mi});function pe(){var e=new j(4);return j!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function ci(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Kt(e,t,n){n=n*.5;var i=Math.sin(n);return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=Math.cos(n),e}function li(e,t){var n=Math.acos(t[3])*2,i=Math.sin(n/2);return i>T?(e[0]=t[0]/i,e[1]=t[1]/i,e[2]=t[2]/i):(e[0]=1,e[1]=0,e[2]=0),n}function _i(e,t){var n=Le(e,t);return Math.acos(2*n*n-1)}function en(e,t,n){var i=t[0],s=t[1],o=t[2],l=t[3],_=n[0],h=n[1],p=n[2],r=n[3];return e[0]=i*r+l*_+s*p-o*h,e[1]=s*r+l*h+o*_-i*p,e[2]=o*r+l*p+i*h-s*_,e[3]=l*r-i*_-s*h-o*p,e}function Je(e,t,n){n*=.5;var i=t[0],s=t[1],o=t[2],l=t[3],_=Math.sin(n),h=Math.cos(n);return e[0]=i*h+l*_,e[1]=s*h+o*_,e[2]=o*h-s*_,e[3]=l*h-i*_,e}function Ke(e,t,n){n*=.5;var i=t[0],s=t[1],o=t[2],l=t[3],_=Math.sin(n),h=Math.cos(n);return e[0]=i*h-o*_,e[1]=s*h+l*_,e[2]=o*h+i*_,e[3]=l*h-s*_,e}function et(e,t,n){n*=.5;var i=t[0],s=t[1],o=t[2],l=t[3],_=Math.sin(n),h=Math.cos(n);return e[0]=i*h+s*_,e[1]=s*h-i*_,e[2]=o*h+l*_,e[3]=l*h-o*_,e}function hi(e,t){var n=t[0],i=t[1],s=t[2];return e[0]=n,e[1]=i,e[2]=s,e[3]=Math.sqrt(Math.abs(1-n*n-i*i-s*s)),e}function tn(e,t){var n=t[0],i=t[1],s=t[2],o=t[3],l=Math.sqrt(n*n+i*i+s*s),_=Math.exp(o),h=l>0?_*Math.sin(l)/l:0;return e[0]=n*h,e[1]=i*h,e[2]=s*h,e[3]=_*Math.cos(l),e}function nn(e,t){var n=t[0],i=t[1],s=t[2],o=t[3],l=Math.sqrt(n*n+i*i+s*s),_=l>0?Math.atan2(l,o)/l:0;return e[0]=n*_,e[1]=i*_,e[2]=s*_,e[3]=.5*Math.log(n*n+i*i+s*s+o*o),e}function di(e,t,n){return nn(e,t),sn(e,e,n),tn(e,e),e}function Ie(e,t,n,i){var s=t[0],o=t[1],l=t[2],_=t[3],h=n[0],p=n[1],r=n[2],a=n[3],c,d,u,v,f;return d=s*h+o*p+l*r+_*a,d<0&&(d=-d,h=-h,p=-p,r=-r,a=-a),1-d>T?(c=Math.acos(d),u=Math.sin(c),v=Math.sin((1-i)*c)/u,f=Math.sin(i*c)/u):(v=1-i,f=i),e[0]=v*s+f*h,e[1]=v*o+f*p,e[2]=v*l+f*r,e[3]=v*_+f*a,e}function fi(e){var t=G(),n=G(),i=G(),s=Math.sqrt(1-t),o=Math.sqrt(t);return e[0]=s*Math.sin(2*Math.PI*n),e[1]=s*Math.cos(2*Math.PI*n),e[2]=o*Math.sin(2*Math.PI*i),e[3]=o*Math.cos(2*Math.PI*i),e}function pi(e,t){var n=t[0],i=t[1],s=t[2],o=t[3],l=n*n+i*i+s*s+o*o,_=l?1/l:0;return e[0]=-n*_,e[1]=-i*_,e[2]=-s*_,e[3]=o*_,e}function ui(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function rn(e,t){var n=t[0]+t[4]+t[8],i;if(n>0)i=Math.sqrt(n+1),e[3]=.5*i,i=.5/i,e[0]=(t[5]-t[7])*i,e[1]=(t[6]-t[2])*i,e[2]=(t[1]-t[3])*i;else{var s=0;t[4]>t[0]&&(s=1),t[8]>t[s*3+s]&&(s=2);var o=(s+1)%3,l=(s+2)%3;i=Math.sqrt(t[s*3+s]-t[o*3+o]-t[l*3+l]+1),e[s]=.5*i,i=.5/i,e[3]=(t[o*3+l]-t[l*3+o])*i,e[o]=(t[o*3+s]+t[s*3+o])*i,e[l]=(t[l*3+s]+t[s*3+l])*i}return e}function vi(e,t,n,i){var s=.5*Math.PI/180;t*=s,n*=s,i*=s;var o=Math.sin(t),l=Math.cos(t),_=Math.sin(n),h=Math.cos(n),p=Math.sin(i),r=Math.cos(i);return e[0]=o*h*r-l*_*p,e[1]=l*_*r+o*h*p,e[2]=l*h*p-o*_*r,e[3]=l*h*r+o*_*p,e}function mi(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var gi,xi,je,yi,wi,bi,sn,Le,Mi,Ee,Ai,Oe,Ti,tt,Si,Ii,ji,Li,Ei,nt=C(()=>{K();At();Qe();Jt();gi=Ht,xi=zt,je=Bt,yi=Ut,wi=Vt,bi=en,sn=Nt,Le=Gt,Mi=Zt,Ee=Yt,Ai=Ee,Oe=qt,Ti=Oe,tt=Xt,Si=$t,Ii=Qt,ji=function(){var e=Ae(),t=Te(1,0,0),n=Te(0,1,0);return function(i,s,o){var l=Se(s,o);return l<-.999999?(fe(e,t,s),$e(e)<1e-6&&fe(e,n,s),Ze(e,e),Kt(i,e,Math.PI),i):l>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(fe(e,s,o),i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=1+l,tt(i,i))}}(),Li=function(){var e=pe(),t=pe();return function(n,i,s,o,l,_){return Ie(e,i,l,_),Ie(t,s,o,_),Ie(n,e,t,2*_*(1-_)),n}}(),Ei=function(){var e=Mt();return function(t,n,i,s){return e[0]=i[0],e[3]=i[1],e[6]=i[2],e[1]=s[0],e[4]=s[1],e[7]=s[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],tt(t,rn(t,e))}}()});var Z={};le(Z,{add:()=>Ji,clone:()=>Pi,conjugate:()=>rs,copy:()=>on,create:()=>Oi,dot:()=>ln,equals:()=>ls,exactEquals:()=>cs,fromMat4:()=>Wi,fromRotation:()=>ki,fromRotationTranslation:()=>an,fromRotationTranslationValues:()=>Fi,fromTranslation:()=>Ci,fromValues:()=>Ri,getDual:()=>Bi,getReal:()=>zi,getTranslation:()=>Ni,identity:()=>Di,invert:()=>ns,len:()=>is,length:()=>_n,lerp:()=>ts,mul:()=>Ki,multiply:()=>cn,normalize:()=>as,rotateAroundAxis:()=>Qi,rotateByQuatAppend:()=>Zi,rotateByQuatPrepend:()=>$i,rotateX:()=>qi,rotateY:()=>Xi,rotateZ:()=>Gi,scale:()=>es,set:()=>Hi,setDual:()=>Vi,setReal:()=>Ui,sqrLen:()=>ss,squaredLength:()=>Pe,str:()=>os,translate:()=>Yi});function Oi(){var e=new j(8);return j!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e}function Pi(e){var t=new j(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function Ri(e,t,n,i,s,o,l,_){var h=new j(8);return h[0]=e,h[1]=t,h[2]=n,h[3]=i,h[4]=s,h[5]=o,h[6]=l,h[7]=_,h}function Fi(e,t,n,i,s,o,l){var _=new j(8);_[0]=e,_[1]=t,_[2]=n,_[3]=i;var h=s*.5,p=o*.5,r=l*.5;return _[4]=h*i+p*n-r*t,_[5]=p*i+r*e-h*n,_[6]=r*i+h*t-p*e,_[7]=-h*e-p*t-r*n,_}function an(e,t,n){var i=n[0]*.5,s=n[1]*.5,o=n[2]*.5,l=t[0],_=t[1],h=t[2],p=t[3];return e[0]=l,e[1]=_,e[2]=h,e[3]=p,e[4]=i*p+s*h-o*_,e[5]=s*p+o*l-i*h,e[6]=o*p+i*_-s*l,e[7]=-i*l-s*_-o*h,e}function Ci(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0]*.5,e[5]=t[1]*.5,e[6]=t[2]*.5,e[7]=0,e}function ki(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function Wi(e,t){var n=pe();Xe(n,t);var i=new j(3);return qe(i,t),an(e,n,i),e}function on(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function Di(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function Hi(e,t,n,i,s,o,l,_,h){return e[0]=t,e[1]=n,e[2]=i,e[3]=s,e[4]=o,e[5]=l,e[6]=_,e[7]=h,e}function Bi(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e}function Vi(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e}function Ni(e,t){var n=t[4],i=t[5],s=t[6],o=t[7],l=-t[0],_=-t[1],h=-t[2],p=t[3];return e[0]=(n*p+o*l+i*h-s*_)*2,e[1]=(i*p+o*_+s*l-n*h)*2,e[2]=(s*p+o*h+n*_-i*l)*2,e}function Yi(e,t,n){var i=t[0],s=t[1],o=t[2],l=t[3],_=n[0]*.5,h=n[1]*.5,p=n[2]*.5,r=t[4],a=t[5],c=t[6],d=t[7];return e[0]=i,e[1]=s,e[2]=o,e[3]=l,e[4]=l*_+s*p-o*h+r,e[5]=l*h+o*_-i*p+a,e[6]=l*p+i*h-s*_+c,e[7]=-i*_-s*h-o*p+d,e}function qi(e,t,n){var i=-t[0],s=-t[1],o=-t[2],l=t[3],_=t[4],h=t[5],p=t[6],r=t[7],a=_*l+r*i+h*o-p*s,c=h*l+r*s+p*i-_*o,d=p*l+r*o+_*s-h*i,u=r*l-_*i-h*s-p*o;return Je(e,t,n),i=e[0],s=e[1],o=e[2],l=e[3],e[4]=a*l+u*i+c*o-d*s,e[5]=c*l+u*s+d*i-a*o,e[6]=d*l+u*o+a*s-c*i,e[7]=u*l-a*i-c*s-d*o,e}function Xi(e,t,n){var i=-t[0],s=-t[1],o=-t[2],l=t[3],_=t[4],h=t[5],p=t[6],r=t[7],a=_*l+r*i+h*o-p*s,c=h*l+r*s+p*i-_*o,d=p*l+r*o+_*s-h*i,u=r*l-_*i-h*s-p*o;return Ke(e,t,n),i=e[0],s=e[1],o=e[2],l=e[3],e[4]=a*l+u*i+c*o-d*s,e[5]=c*l+u*s+d*i-a*o,e[6]=d*l+u*o+a*s-c*i,e[7]=u*l-a*i-c*s-d*o,e}function Gi(e,t,n){var i=-t[0],s=-t[1],o=-t[2],l=t[3],_=t[4],h=t[5],p=t[6],r=t[7],a=_*l+r*i+h*o-p*s,c=h*l+r*s+p*i-_*o,d=p*l+r*o+_*s-h*i,u=r*l-_*i-h*s-p*o;return et(e,t,n),i=e[0],s=e[1],o=e[2],l=e[3],e[4]=a*l+u*i+c*o-d*s,e[5]=c*l+u*s+d*i-a*o,e[6]=d*l+u*o+a*s-c*i,e[7]=u*l-a*i-c*s-d*o,e}function Zi(e,t,n){var i=n[0],s=n[1],o=n[2],l=n[3],_=t[0],h=t[1],p=t[2],r=t[3];return e[0]=_*l+r*i+h*o-p*s,e[1]=h*l+r*s+p*i-_*o,e[2]=p*l+r*o+_*s-h*i,e[3]=r*l-_*i-h*s-p*o,_=t[4],h=t[5],p=t[6],r=t[7],e[4]=_*l+r*i+h*o-p*s,e[5]=h*l+r*s+p*i-_*o,e[6]=p*l+r*o+_*s-h*i,e[7]=r*l-_*i-h*s-p*o,e}function $i(e,t,n){var i=t[0],s=t[1],o=t[2],l=t[3],_=n[0],h=n[1],p=n[2],r=n[3];return e[0]=i*r+l*_+s*p-o*h,e[1]=s*r+l*h+o*_-i*p,e[2]=o*r+l*p+i*h-s*_,e[3]=l*r-i*_-s*h-o*p,_=n[4],h=n[5],p=n[6],r=n[7],e[4]=i*r+l*_+s*p-o*h,e[5]=s*r+l*h+o*_-i*p,e[6]=o*r+l*p+i*h-s*_,e[7]=l*r-i*_-s*h-o*p,e}function Qi(e,t,n,i){if(Math.abs(i)<T)return on(e,t);var s=Math.hypot(n[0],n[1],n[2]);i=i*.5;var o=Math.sin(i),l=o*n[0]/s,_=o*n[1]/s,h=o*n[2]/s,p=Math.cos(i),r=t[0],a=t[1],c=t[2],d=t[3];e[0]=r*p+d*l+a*h-c*_,e[1]=a*p+d*_+c*l-r*h,e[2]=c*p+d*h+r*_-a*l,e[3]=d*p-r*l-a*_-c*h;var u=t[4],v=t[5],f=t[6],m=t[7];return e[4]=u*p+m*l+v*h-f*_,e[5]=v*p+m*_+f*l-u*h,e[6]=f*p+m*h+u*_-v*l,e[7]=m*p-u*l-v*_-f*h,e}function Ji(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e}function cn(e,t,n){var i=t[0],s=t[1],o=t[2],l=t[3],_=n[4],h=n[5],p=n[6],r=n[7],a=t[4],c=t[5],d=t[6],u=t[7],v=n[0],f=n[1],m=n[2],x=n[3];return e[0]=i*x+l*v+s*m-o*f,e[1]=s*x+l*f+o*v-i*m,e[2]=o*x+l*m+i*f-s*v,e[3]=l*x-i*v-s*f-o*m,e[4]=i*r+l*_+s*p-o*h+a*x+u*v+c*m-d*f,e[5]=s*r+l*h+o*_-i*p+c*x+u*f+d*v-a*m,e[6]=o*r+l*p+i*h-s*_+d*x+u*m+a*f-c*v,e[7]=l*r-i*_-s*h-o*p+u*x-a*v-c*f-d*m,e}function es(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e}function ts(e,t,n,i){var s=1-i;return ln(t,n)<0&&(i=-i),e[0]=t[0]*s+n[0]*i,e[1]=t[1]*s+n[1]*i,e[2]=t[2]*s+n[2]*i,e[3]=t[3]*s+n[3]*i,e[4]=t[4]*s+n[4]*i,e[5]=t[5]*s+n[5]*i,e[6]=t[6]*s+n[6]*i,e[7]=t[7]*s+n[7]*i,e}function ns(e,t){var n=Pe(t);return e[0]=-t[0]/n,e[1]=-t[1]/n,e[2]=-t[2]/n,e[3]=t[3]/n,e[4]=-t[4]/n,e[5]=-t[5]/n,e[6]=-t[6]/n,e[7]=t[7]/n,e}function rs(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e}function as(e,t){var n=Pe(t);if(n>0){n=Math.sqrt(n);var i=t[0]/n,s=t[1]/n,o=t[2]/n,l=t[3]/n,_=t[4],h=t[5],p=t[6],r=t[7],a=i*_+s*h+o*p+l*r;e[0]=i,e[1]=s,e[2]=o,e[3]=l,e[4]=(_-i*a)/n,e[5]=(h-s*a)/n,e[6]=(p-o*a)/n,e[7]=(r-l*a)/n}return e}function os(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"}function cs(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]}function ls(e,t){var n=e[0],i=e[1],s=e[2],o=e[3],l=e[4],_=e[5],h=e[6],p=e[7],r=t[0],a=t[1],c=t[2],d=t[3],u=t[4],v=t[5],f=t[6],m=t[7];return Math.abs(n-r)<=T*Math.max(1,Math.abs(n),Math.abs(r))&&Math.abs(i-a)<=T*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(s-c)<=T*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(o-d)<=T*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(l-u)<=T*Math.max(1,Math.abs(l),Math.abs(u))&&Math.abs(_-v)<=T*Math.max(1,Math.abs(_),Math.abs(v))&&Math.abs(h-f)<=T*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(p-m)<=T*Math.max(1,Math.abs(p),Math.abs(m))}var zi,Ui,Ki,ln,_n,is,Pe,ss,hn=C(()=>{K();nt();Ge();zi=je;Ui=je;Ki=cn;ln=Le;_n=Ee,is=_n,Pe=Oe,ss=Pe});var ve=C(()=>{Ge();nt();hn();Qe()});var _s={};var dn=C(()=>{ve();WL.registerComponent("cursor",{collisionGroup:{type:WL.Type.Int,default:1},cursorRayObject:{type:WL.Type.Object},cursorRayScalingAxis:{type:WL.Type.Enum,values:["x","y","z","none"],default:"z"},cursorObject:{type:WL.Type.Object},handedness:{type:WL.Type.Enum,values:["input component","left","right","none"],default:"input component"},rayCastMode:{type:WL.Type.Enum,values:["collision","physx"],default:"collision"},styleCursor:{type:WL.Type.Bool,default:!0}},{init:function(){this.session=null,this.collisionMask=1<<this.collisionGroup,this.maxDistance=100;let e=this.onDestroy.bind(this);WL.onSceneLoaded.push(e),this.onDestroyCallbacks=[()=>{let t=WL.onSceneLoaded.indexOf(e);t>=0&&WL.onSceneLoaded.splice(t,1)}]},start:function(){if(this.handedness==0){let t=this.object.getComponent("input");t?(this.handedness=t.handedness,this.input=t):console.warn("cursor component on object",this.object.name,'was configured with handedness "input component", but object has no input component.')}else this.handedness=["left","right"][this.handedness-1];if(this.globalTarget=this.object.addComponent("cursor-target"),this.origin=new Float32Array(3),this.cursorObjScale=new Float32Array(3),this.direction=[0,0,0],this.tempQuat=new Float32Array(4),this.viewComponent=this.object.getComponent("view"),this.viewComponent!=null){let t=this.onClick.bind(this);WL.canvas.addEventListener("click",t);let n=this.onPointerMove.bind(this);WL.canvas.addEventListener("pointermove",n);let i=this.onPointerDown.bind(this);WL.canvas.addEventListener("pointerdown",i);let s=this.onPointerUp.bind(this);WL.canvas.addEventListener("pointerup",s),this.projectionMatrix=new Float32Array(16),ae.invert(this.projectionMatrix,this.viewComponent.projectionMatrix);let o=this.onViewportResize.bind(this);window.addEventListener("resize",o),this.onDestroyCallbacks.push(()=>{WL.canvas.removeEventListener("click",t),WL.canvas.removeEventListener("pointermove",n),WL.canvas.removeEventListener("pointerdown",i),WL.canvas.removeEventListener("pointerup",s),window.removeEventListener("resize",o)})}this.isHovering=!1,this.visible=!0,this.isDown=!1,this.lastIsDown=!1,this.cursorPos=new Float32Array(3),this.hoveringObject=null;let e=this.setupVREvents.bind(this);WL.onXRSessionStart.push(e),this.onDestroyCallbacks.push(()=>{let t=WL.onXRSessionStart.indexOf(e);t>=0&&WL.onXRSessionStart.splice(t,1)}),this.cursorRayObject&&(this.cursorRayScale=new Float32Array(3),this.cursorRayScale.set(this.cursorRayObject.scalingLocal),this.object.getTranslationWorld(this.origin),this.object.getForward(this.direction),this._setCursorRayTransform([this.origin[0]+this.direction[0],this.origin[1]+this.direction[1],this.origin[2]+this.direction[2]]))},onViewportResize:function(){this.viewComponent&&ae.invert(this.projectionMatrix,this.viewComponent.projectionMatrix)},_setCursorRayTransform:function(e){if(!this.cursorRayObject)return;let t=k.dist(this.origin,e);this.cursorRayObject.setTranslationLocal([0,0,-t/2]),this.cursorRayScalingAxis!=4&&(this.cursorRayObject.resetScaling(),this.cursorRayScale[this.cursorRayScalingAxis]=t/2,this.cursorRayObject.scale(this.cursorRayScale))},_setCursorVisibility:function(e){this.visible!=e&&(this.visible=e,this.cursorObject&&(e?(this.cursorObject.resetScaling(),this.cursorObject.scale(this.cursorObjScale)):(this.cursorObjScale.set(this.cursorObject.scalingLocal),this.cursorObject.scale([0,0,0]))))},update:function(){this.doUpdate(!1)},doUpdate:function(e){if(this.session){if(this.arTouchDown&&this.input&&WL.xrSession.inputSources[0].handedness==="none"&&WL.xrSession.inputSources[0].gamepad){let n=WL.xrSession.inputSources[0].gamepad.axes;this.direction=[n[0],-n[1],-1],this.updateDirection()}else this.object.getTranslationWorld(this.origin),this.object.getForward(this.direction);let t=this.rayHit=this.rayCastMode==0?WL.scene.rayCast(this.origin,this.direction,this.collisionMask):WL.physics.rayCast(this.origin,this.direction,this.collisionMask,this.maxDistance);t.hitCount>0?this.cursorPos.set(t.locations[0]):this.cursorPos.fill(0),this.hoverBehaviour(t,e)}this.cursorObject&&(this.hoveringObject&&(this.cursorPos[0]!=0||this.cursorPos[1]!=0||this.cursorPos[2]!=0)?(this._setCursorVisibility(!0),this.cursorObject.setTranslationWorld(this.cursorPos),this._setCursorRayTransform(this.cursorPos)):this._setCursorVisibility(!1))},hoverBehaviour:function(e,t){if(e.hitCount>0){if(!this.hoveringObject||!this.hoveringObject.equals(e.objects[0])){if(this.hoveringObject){let s=this.hoveringObject.getComponent("cursor-target");s&&s.onUnhover(this.hoveringObject,this),this.globalTarget.onUnhover(this.hoveringObject,this)}this.hoveringObject=e.objects[0],this.styleCursor&&(WL.canvas.style.cursor="pointer");let i=this.hoveringObject.getComponent("cursor-target");i&&(this.hoveringObjectTarget=i,i.onHover(this.hoveringObject,this)),this.globalTarget.onHover(this.hoveringObject,this)}this.hoveringObjectTarget&&this.hoveringObjectTarget.onMove(this.hoveringObject,this);let n=this.hoveringObject.getComponent("cursor-target");this.isDown!==this.lastIsDown&&(this.isDown?(n&&n.onDown(this.hoveringObject,this),this.globalTarget.onDown(this.hoveringObject,this)):(n&&n.onUp(this.hoveringObject,this),this.globalTarget.onUp(this.hoveringObject,this))),t&&(n&&n.onClick(this.hoveringObject,this),this.globalTarget.onClick(this.hoveringObject,this))}else if(this.hoveringObject&&e.hitCount==0){let n=this.hoveringObject.getComponent("cursor-target");n&&n.onUnhover(this.hoveringObject,this),this.globalTarget.onUnhover(this.hoveringObject,this),this.hoveringObject=null,this.hoveringObjectTarget=null,this.styleCursor&&(WL.canvas.style.cursor="default")}this.lastIsDown=this.isDown},setupVREvents:function(e){this.session=e;let t=function(o){this.session=null}.bind(this);e.addEventListener("end",t);let n=this.onSelect.bind(this);e.addEventListener("select",n);let i=this.onSelectStart.bind(this);e.addEventListener("selectstart",i);let s=this.onSelectEnd.bind(this);e.addEventListener("selectend",s),this.onDestroyCallbacks.push(()=>{this.session&&(e.removeEventListener("end",t),e.removeEventListener("select",n),e.removeEventListener("selectstart",i),e.removeEventListener("selectend",s))}),this.onViewportResize()},onSelect:function(e){e.inputSource.handedness==this.handedness&&this.doUpdate(!0)},onSelectStart:function(e){this.arTouchDown=!0,e.inputSource.handedness==this.handedness&&(this.isDown=!0)},onSelectEnd:function(e){this.arTouchDown=!1,e.inputSource.handedness==this.handedness&&(this.isDown=!1)},onPointerMove:function(e){if(!e.isPrimary)return;let t=e.target.getBoundingClientRect(),n=this.updateMousePos(e.clientX,e.clientY,t.width,t.height);this.hoverBehaviour(n,!1)},onClick:function(e){let t=e.target.getBoundingClientRect(),n=this.updateMousePos(e.clientX,e.clientY,t.width,t.height);this.hoverBehaviour(n,!0)},onPointerDown:function(e){if(!e.isPrimary||e.button!==0)return;let t=e.target.getBoundingClientRect(),n=this.updateMousePos(e.clientX,e.clientY,t.width,t.height);this.isDown=!0,this.hoverBehaviour(n,!1)},onPointerUp:function(e){if(!e.isPrimary||e.button!==0)return;let t=e.target.getBoundingClientRect(),n=this.updateMousePos(e.clientX,e.clientY,t.width,t.height);this.isDown=!1,this.hoverBehaviour(n,!1)},updateMousePos:function(e,t,n,i){let s=e/n,o=t/i;return this.direction=[s*2-1,-o*2+1,-1],this.updateDirection()},updateDirection:function(){this.object.getTranslationWorld(this.origin),k.transformMat4(this.direction,this.direction,this.projectionMatrix),k.normalize(this.direction,this.direction),k.transformQuat(this.direction,this.direction,this.object.transformWorld);let e=this.rayHit=this.rayCastMode==0?WL.scene.rayCast(this.origin,this.direction,this.collisionMask):WL.physics.rayCast(this.origin,this.direction,this.collisionMask,this.maxDistance);return e.hitCount>0?this.cursorPos.set(e.locations[0]):this.cursorPos.fill(0),e},onDeactivate:function(){if(this._setCursorVisibility(!1),this.hoveringObject){let e=this.hoveringObject.getComponent("cursor-target");e&&e.onUnhover(this.hoveringObject,this),this.globalTarget.onUnhover(this.hoveringObject,this)}this.cursorRayObject&&this.cursorRayObject.scale([0,0,0])},onActivate:function(){this._setCursorVisibility(!0)},onDestroy:function(){for(let e of this.onDestroyCallbacks)e()}})});var hs={};var fn=C(()=>{ve();WL.registerComponent("mouse-look",{sensitity:{type:WL.Type.Float,default:.25},requireMouseDown:{type:WL.Type.Bool,default:!0},mouseButtonIndex:{type:WL.Type.Int,default:0},pointerLockOnClick:{type:WL.Type.Bool,default:!1}},{init:function(){this.currentRotationY=0,this.currentRotationX=0,this.origin=new Float32Array(3),this.parentOrigin=new Float32Array(3),document.addEventListener("mousemove",function(e){if(this.active&&(this.mouseDown||!this.requireMouseDown)){this.rotationY=-this.sensitity*e.movementX/100,this.rotationX=-this.sensitity*e.movementY/100,this.currentRotationX+=this.rotationX,this.currentRotationY+=this.rotationY,this.currentRotationX=Math.min(1.507,this.currentRotationX),this.currentRotationX=Math.max(-1.507,this.currentRotationX),this.object.getTranslationWorld(this.origin);let t=this.object.parent;t!==null&&(t.getTranslationWorld(this.parentOrigin),k.sub(this.origin,this.origin,this.parentOrigin)),this.object.resetTranslationRotation(),this.object.rotateAxisAngleRad([1,0,0],this.currentRotationX),this.object.rotateAxisAngleRad([0,1,0],this.currentRotationY),this.object.translate(this.origin)}}.bind(this)),this.pointerLockOnClick&&WL.canvas.addEventListener("mousedown",()=>{WL.canvas.requestPointerLock=WL.canvas.requestPointerLock||WL.canvas.mozRequestPointerLock||WL.canvas.webkitRequestPointerLock,WL.canvas.requestPointerLock()}),this.requireMouseDown&&(this.mouseButtonIndex==2&&WL.canvas.addEventListener("contextmenu",function(e){e.preventDefault()},!1),WL.canvas.addEventListener("mousedown",function(e){if(e.button==this.mouseButtonIndex&&(this.mouseDown=!0,document.body.style.cursor="grabbing",e.button==1))return e.preventDefault(),!1}.bind(this)),WL.canvas.addEventListener("mouseup",function(e){e.button==this.mouseButtonIndex&&(this.mouseDown=!1,document.body.style.cursor="initial")}.bind(this)))},start:function(){this.rotationX=0,this.rotationY=0}})});var pn=ee(()=>{WL.registerComponent("player-height",{height:{type:WL.Type.Float,default:1.75}},{init:function(){WL.onXRSessionStart.push(this.onXRSessionStart.bind(this)),WL.onXRSessionEnd.push(this.onXRSessionEnd.bind(this))},start:function(){this.object.resetTranslationRotation(),this.object.translate([0,this.height,0])},onXRSessionStart:function(){["local","viewer"].includes(WebXR.refSpace)||this.object.resetTranslationRotation()},onXRSessionEnd:function(){["local","viewer"].includes(WebXR.refSpace)||(this.object.resetTranslationRotation(),this.object.translate([0,this.height,0]))}})});var ds={};var un=C(()=>{ve();WL.registerComponent("hand-tracking",{handedness:{type:WL.Type.Enum,default:"left",values:["left","right"]},jointMesh:{type:WL.Type.Mesh,default:null},jointMaterial:{type:WL.Type.Material,default:null},handSkin:{type:WL.Type.Skin,default:null},deactivateChildrenWithoutPose:{type:WL.Type.Bool,default:!0},controllerToDeactivate:{type:WL.Type.Object}},{ORDERED_JOINTS:["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"],init:function(){this.handedness=["left","right"][this.handedness]},start:function(){if(this.joints=[],this.session=null,this.hasPose=!1,this._childrenActive=!0,!("XRHand"in window)){console.warn("WebXR Hand Tracking not supported by this browser."),this.active=!1;return}if(this.handSkin){let t=this.handSkin.jointIds;this.joints[this.ORDERED_JOINTS[0]]=new WL.Object(t[0]);for(let n=0;n<t.length;++n){let i=new WL.Object(t[n]);this.joints[i.name]=i}return}for(let e=0;e<=this.ORDERED_JOINTS.length;++e){let t=WL.scene.addObject(this.object.parent),n=t.addComponent("mesh");n.mesh=this.jointMesh,n.material=this.jointMaterial,this.joints[this.ORDERED_JOINTS[e]]=t}},update:function(e){if(this.session||WL.xrSession&&this.setupVREvents(WL.xrSession),!!this.session){if(this.hasPose=!1,this.session&&this.session.inputSources)for(let t=0;t<=this.session.inputSources.length;++t){let n=this.session.inputSources[t];if(!n||!n.hand||n.handedness!=this.handedness)continue;if(this.hasPose=!0,n.hand.get("wrist")!==null){let o=Module.webxr_frame.getJointPose(n.hand.get("wrist"),WebXR.refSpaces[WebXR.refSpace]);o&&(this.object.resetTranslationRotation(),this.object.transformLocal.set([o.transform.orientation.x,o.transform.orientation.y,o.transform.orientation.z,o.transform.orientation.w]),this.object.translate([o.transform.position.x,o.transform.position.y,o.transform.position.z]))}let i=new Float32Array(3),s=new Float32Array(4);ue.invert(s,this.object.transformLocal),this.object.getTranslationLocal(i);for(let o=0;o<this.ORDERED_JOINTS.length;++o){let l=this.ORDERED_JOINTS[o],_=this.joints[l];if(_==null)continue;let h=null;if(n.hand.get(l)!==null&&(h=Module.webxr_frame.getJointPose(n.hand.get(l),WebXR.refSpaces[WebXR.refSpace])),h!==null)if(this.handSkin)_.resetTranslationRotation(),_.translate([h.transform.position.x-i[0],h.transform.position.y-i[1],h.transform.position.z-i[2]]),_.rotate(s),_.rotateObject([h.transform.orientation.x,h.transform.orientation.y,h.transform.orientation.z,h.transform.orientation.w]);else{_.resetTransform(),_.transformLocal.set([h.transform.orientation.x,h.transform.orientation.y,h.transform.orientation.z,h.transform.orientation.w]),_.translate([h.transform.position.x,h.transform.position.y,h.transform.position.z]);let p=h.radius||.007;_.scale([p,p,p])}else this.handSkin||_.scale([0,0,0])}}!this.hasPose&&this._childrenActive?(this._childrenActive=!1,this.deactivateChildrenWithoutPose&&this.setChildrenActive(!1),this.controllerToDeactivate&&(this.controllerToDeactivate.active=!0,this.setChildrenActive(!0,this.controllerToDeactivate))):this.hasPose&&!this._childrenActive&&(this._childrenActive=!0,this.deactivateChildrenWithoutPose&&this.setChildrenActive(!0),this.controllerToDeactivate&&(this.controllerToDeactivate.active=!1,this.setChildrenActive(!1,this.controllerToDeactivate)))}},setChildrenActive:function(e,t){t=t||this.object;let n=t.children;for(let i of n)i.active=e,this.setChildrenActive(e,i)},isGrabbing:function(){let e=[0,0,0];Z.getTranslation(e,this.joints["index-finger-tip"].transformLocal);let t=[0,0,0];return Z.getTranslation(t,this.joints["thumb-tip"].transformLocal),k.sqrDist(t,e)<.001},setupVREvents:function(e){this.session=e}})});var fs={};var vn=C(()=>{ve();WL.registerComponent("teleport",{teleportIndicatorMeshObject:{type:WL.Type.Object},camRoot:{type:WL.Type.Object},cam:{type:WL.Type.Object},eyeLeft:{type:WL.Type.Object},eyeRight:{type:WL.Type.Object},handedness:{type:WL.Type.Enum,values:["input component","left","right","none"],default:"input component"},floorGroup:{type:WL.Type.Int,default:1},thumbstickActivationThreshhold:{type:WL.Type.Float,default:-.7},thumbstickDeactivationThreshhold:{type:WL.Type.Float,default:.3},indicatorYOffset:{type:WL.Type.Float,default:.01},rayCastMode:{type:WL.Type.Enum,values:["collision","physx"],default:"collision"},maxDistance:{type:WL.Type.Float,default:100}},{init:function(){if(this._prevThumbstickAxis=new Float32Array(2),this._tempVec=new Float32Array(3),this._tempVec0=new Float32Array(3),this._currentIndicatorRotation=0,this.input=this.object.getComponent("input"),!this.input){console.error(this.object.name,"generic-teleport-component.js: input component is required on the object");return}if(!this.teleportIndicatorMeshObject){console.error(this.object.name,"generic-teleport-component.js: Teleport indicator mesh is missing");return}if(!this.camRoot){console.error(this.object.name,"generic-teleport-component.js: camRoot not set");return}this.isIndicating=!1,this.cam&&(this.isMouseIndicating=!1,WL.canvas.addEventListener("mousedown",this.onMouseDown.bind(this)),WL.canvas.addEventListener("mouseup",this.onMouseUp.bind(this))),this.indicatorHidden=!0,this.hitSpot=new Float32Array(3),this._hasHit=!1,this._extraRotation=0,this._currentStickAxes=new Float32Array(2)},start:function(){if(this.handedness==0){let e=this.object.getComponent("input");e?(this.handedness=e.handedness,this.input=e):console.warn("teleport component on object",this.object.name,'was configured with handedness "input component", but object has no input component.')}else this.handedness=["left","right"][this.handedness-1];WL.onXRSessionStart.push(this.setupVREvents.bind(this)),this.teleportIndicatorMeshObject.active=!1},_getCamRotation:function(){return this.eyeLeft.getForward(this._tempVec),this._tempVec[1]=0,k.normalize(this._tempVec,this._tempVec),Math.atan2(this._tempVec[0],this._tempVec[2])},update:function(){let e=0;if(this.gamepad&&this.gamepad.axes&&(this._currentStickAxes[0]=this.gamepad.axes[2],this._currentStickAxes[1]=this.gamepad.axes[3],e=Math.abs(this._currentStickAxes[0])+Math.abs(this._currentStickAxes[1])),!this.isIndicating&&this._prevThumbstickAxis[1]>=this.thumbstickActivationThreshhold&&this._currentStickAxes[1]<this.thumbstickActivationThreshhold?this.isIndicating=!0:this.isIndicating&&e<this.thumbstickDeactivationThreshhold&&(this.isIndicating=!1,this.teleportIndicatorMeshObject.active=!1,this._hasHit&&this._teleportPlayer(this.hitSpot,this._extraRotation)),this.isIndicating&&this.teleportIndicatorMeshObject&&this.input){let t=this._tempVec0;Z.getTranslation(t,this.object.transformWorld);let n=this.object.getForward(this._tempVec),i=this.rayHit=this.rayCastMode==0?WL.scene.rayCast(t,n,1<<this.floorGroup):WL.physics.rayCast(t,n,1<<this.floorGroup,this.maxDistance);i.hitCount>0?(this.indicatorHidden=!1,this._extraRotation=Math.PI+Math.atan2(this._currentStickAxes[0],this._currentStickAxes[1]),this._currentIndicatorRotation=this._getCamRotation()+(this._extraRotation-Math.PI),this.teleportIndicatorMeshObject.resetTranslationRotation(),this.teleportIndicatorMeshObject.rotateAxisAngleRad([0,1,0],this._currentIndicatorRotation),this.teleportIndicatorMeshObject.translate(i.locations[0]),this.teleportIndicatorMeshObject.translate([0,this.indicatorYOffset,0]),this.teleportIndicatorMeshObject.active=!0,this.hitSpot.set(i.locations[0]),this._hasHit=!0):(this.indicatorHidden||(this.teleportIndicatorMeshObject.active=!1,this.indicatorHidden=!0),this._hasHit=!1)}else this.teleportIndicatorMeshObject&&this.isMouseIndicating&&this.onMousePressed();this._prevThumbstickAxis.set(this._currentStickAxes)},setupVREvents:function(e){if(this.session=e,e.addEventListener("end",function(){this.gamepad=null,this.session=null}.bind(this)),e.inputSources&&e.inputSources.length)for(let t=0;t<e.inputSources.length;t++){let n=e.inputSources[t];n.handedness==this.handedness&&(this.gamepad=n.gamepad)}e.addEventListener("inputsourceschange",function(t){if(t.added&&t.added.length)for(let n=0;n<t.added.length;n++){let i=t.added[n];i.handedness==this.handedness&&(this.gamepad=i.gamepad)}}.bind(this))},onMouseDown:function(){this.isMouseIndicating=!0},onMouseUp:function(){this.isMouseIndicating=!1,this.teleportIndicatorMeshObject.active=!1,this._hasHit&&this._teleportPlayer(this.hitSpot,0)},onMousePressed:function(){let e=[0,0,0];Z.getTranslation(e,this.cam.transformWorld);let t=this.cam.getForward(this._tempVec),n=this.rayHit=this.rayCastMode==0?WL.scene.rayCast(e,t,1<<this.floorGroup):WL.physics.rayCast(e,t,1<<this.floorGroup,this.maxDistance);n.hitCount>0?(this.indicatorHidden=!1,t[1]=0,k.normalize(t,t),this._currentIndicatorRotation=-Math.sign(t[2])*Math.acos(t[0])-Math.PI*.5,this.teleportIndicatorMeshObject.resetTranslationRotation(),this.teleportIndicatorMeshObject.rotateAxisAngleRad([0,1,0],this._currentIndicatorRotation),this.teleportIndicatorMeshObject.translate(n.locations[0]),this.teleportIndicatorMeshObject.active=!0,this.hitSpot=n.locations[0],this._hasHit=!0):(this.indicatorHidden||(this.teleportIndicatorMeshObject.active=!1,this.indicatorHidden=!0),this._hasHit=!1)},_teleportPlayer:function(e,t){this.camRoot.rotateAxisAngleRad([0,1,0],t);let n=this._tempVec,i=this._tempVec0;this.session?(this.eyeLeft.getTranslationWorld(n),this.eyeRight.getTranslationWorld(i),k.add(n,n,i),k.scale(n,n,.5)):this.cam.getTranslationWorld(n),this.camRoot.getTranslationWorld(i),k.sub(n,i,n),n[0]+=e[0],n[1]=e[1],n[2]+=e[2],this.camRoot.setTranslationWorld(n)}})});var mn=ee(()=>{WL.registerComponent("vr-mode-active-switch",{activateComponents:{type:WL.Type.Enum,values:["in VR","in non-VR"],default:"in VR"},affectChildren:{type:WL.Type.Bool,default:!0}},{start:function(){this.components=[],this.getComponents(this.object),this.onXRSessionEnd(),WL.onXRSessionStart.push(this.onXRSessionStart.bind(this)),WL.onXRSessionEnd.push(this.onXRSessionEnd.bind(this))},getComponents:function(e){let t=e.getComponents().filter(n=>n.type!="vr-mode-active-switch");if(this.components=this.components.concat(t),this.affectChildren){let n=e.children;for(let i=0;i<n.length;++i)this.getComponents(n[i])}},setComponentsActive:function(e){let t=this.components;for(let n=0;n<t.length;++n)t[n].active=e},onXRSessionStart:function(){this.active&&this.setComponentsActive(this.activateComponents==0)},onXRSessionEnd:function(){this.active&&this.setComponentsActive(this.activateComponents!=0)}})});var rt=ee(Re=>{(function(){"use strict";var e=function(){this.init()};e.prototype={init:function(){var r=this||t;return r._counter=1e3,r._html5AudioPool=[],r.html5PoolSize=10,r._codecs={},r._howls=[],r._muted=!1,r._volume=1,r._canPlayEvent="canplaythrough",r._navigator=typeof window<"u"&&window.navigator?window.navigator:null,r.masterGain=null,r.noAudio=!1,r.usingWebAudio=!0,r.autoSuspend=!0,r.ctx=null,r.autoUnlock=!0,r._setup(),r},volume:function(r){var a=this||t;if(r=parseFloat(r),a.ctx||p(),typeof r<"u"&&r>=0&&r<=1){if(a._volume=r,a._muted)return a;a.usingWebAudio&&a.masterGain.gain.setValueAtTime(r,t.ctx.currentTime);for(var c=0;c<a._howls.length;c++)if(!a._howls[c]._webAudio)for(var d=a._howls[c]._getSoundIds(),u=0;u<d.length;u++){var v=a._howls[c]._soundById(d[u]);v&&v._node&&(v._node.volume=v._volume*r)}return a}return a._volume},mute:function(r){var a=this||t;a.ctx||p(),a._muted=r,a.usingWebAudio&&a.masterGain.gain.setValueAtTime(r?0:a._volume,t.ctx.currentTime);for(var c=0;c<a._howls.length;c++)if(!a._howls[c]._webAudio)for(var d=a._howls[c]._getSoundIds(),u=0;u<d.length;u++){var v=a._howls[c]._soundById(d[u]);v&&v._node&&(v._node.muted=r?!0:v._muted)}return a},stop:function(){for(var r=this||t,a=0;a<r._howls.length;a++)r._howls[a].stop();return r},unload:function(){for(var r=this||t,a=r._howls.length-1;a>=0;a--)r._howls[a].unload();return r.usingWebAudio&&r.ctx&&typeof r.ctx.close<"u"&&(r.ctx.close(),r.ctx=null,p()),r},codecs:function(r){return(this||t)._codecs[r.replace(/^x-/,"")]},_setup:function(){var r=this||t;if(r.state=r.ctx&&r.ctx.state||"suspended",r._autoSuspend(),!r.usingWebAudio)if(typeof Audio<"u")try{var a=new Audio;typeof a.oncanplaythrough>"u"&&(r._canPlayEvent="canplay")}catch{r.noAudio=!0}else r.noAudio=!0;try{var a=new Audio;a.muted&&(r.noAudio=!0)}catch{}return r.noAudio||r._setupCodecs(),r},_setupCodecs:function(){var r=this||t,a=null;try{a=typeof Audio<"u"?new Audio:null}catch{return r}if(!a||typeof a.canPlayType!="function")return r;var c=a.canPlayType("audio/mpeg;").replace(/^no$/,""),d=r._navigator?r._navigator.userAgent:"",u=d.match(/OPR\/([0-6].)/g),v=u&&parseInt(u[0].split("/")[1],10)<33,f=d.indexOf("Safari")!==-1&&d.indexOf("Chrome")===-1,m=d.match(/Version\/(.*?) /),x=f&&m&&parseInt(m[1],10)<15;return r._codecs={mp3:!!(!v&&(c||a.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!c,opus:!!a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(a.canPlayType('audio/wav; codecs="1"')||a.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!a.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!a.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(a.canPlayType("audio/x-m4b;")||a.canPlayType("audio/m4b;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(a.canPlayType("audio/x-mp4;")||a.canPlayType("audio/mp4;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!x&&a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!x&&a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!a.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(a.canPlayType("audio/x-flac;")||a.canPlayType("audio/flac;")).replace(/^no$/,"")},r},_unlockAudio:function(){var r=this||t;if(!(r._audioUnlocked||!r.ctx)){r._audioUnlocked=!1,r.autoUnlock=!1,!r._mobileUnloaded&&r.ctx.sampleRate!==44100&&(r._mobileUnloaded=!0,r.unload()),r._scratchBuffer=r.ctx.createBuffer(1,1,22050);var a=function(c){for(;r._html5AudioPool.length<r.html5PoolSize;)try{var d=new Audio;d._unlocked=!0,r._releaseHtml5Audio(d)}catch{r.noAudio=!0;break}for(var u=0;u<r._howls.length;u++)if(!r._howls[u]._webAudio)for(var v=r._howls[u]._getSoundIds(),f=0;f<v.length;f++){var m=r._howls[u]._soundById(v[f]);m&&m._node&&!m._node._unlocked&&(m._node._unlocked=!0,m._node.load())}r._autoResume();var x=r.ctx.createBufferSource();x.buffer=r._scratchBuffer,x.connect(r.ctx.destination),typeof x.start>"u"?x.noteOn(0):x.start(0),typeof r.ctx.resume=="function"&&r.ctx.resume(),x.onended=function(){x.disconnect(0),r._audioUnlocked=!0,document.removeEventListener("touchstart",a,!0),document.removeEventListener("touchend",a,!0),document.removeEventListener("click",a,!0),document.removeEventListener("keydown",a,!0);for(var y=0;y<r._howls.length;y++)r._howls[y]._emit("unlock")}};return document.addEventListener("touchstart",a,!0),document.addEventListener("touchend",a,!0),document.addEventListener("click",a,!0),document.addEventListener("keydown",a,!0),r}},_obtainHtml5Audio:function(){var r=this||t;if(r._html5AudioPool.length)return r._html5AudioPool.pop();var a=new Audio().play();return a&&typeof Promise<"u"&&(a instanceof Promise||typeof a.then=="function")&&a.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(r){var a=this||t;return r._unlocked&&a._html5AudioPool.push(r),a},_autoSuspend:function(){var r=this;if(!(!r.autoSuspend||!r.ctx||typeof r.ctx.suspend>"u"||!t.usingWebAudio)){for(var a=0;a<r._howls.length;a++)if(r._howls[a]._webAudio){for(var c=0;c<r._howls[a]._sounds.length;c++)if(!r._howls[a]._sounds[c]._paused)return r}return r._suspendTimer&&clearTimeout(r._suspendTimer),r._suspendTimer=setTimeout(function(){if(r.autoSuspend){r._suspendTimer=null,r.state="suspending";var d=function(){r.state="suspended",r._resumeAfterSuspend&&(delete r._resumeAfterSuspend,r._autoResume())};r.ctx.suspend().then(d,d)}},3e4),r}},_autoResume:function(){var r=this;if(!(!r.ctx||typeof r.ctx.resume>"u"||!t.usingWebAudio))return r.state==="running"&&r.ctx.state!=="interrupted"&&r._suspendTimer?(clearTimeout(r._suspendTimer),r._suspendTimer=null):r.state==="suspended"||r.state==="running"&&r.ctx.state==="interrupted"?(r.ctx.resume().then(function(){r.state="running";for(var a=0;a<r._howls.length;a++)r._howls[a]._emit("resume")}),r._suspendTimer&&(clearTimeout(r._suspendTimer),r._suspendTimer=null)):r.state==="suspending"&&(r._resumeAfterSuspend=!0),r}};var t=new e,n=function(r){var a=this;if(!r.src||r.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}a.init(r)};n.prototype={init:function(r){var a=this;return t.ctx||p(),a._autoplay=r.autoplay||!1,a._format=typeof r.format!="string"?r.format:[r.format],a._html5=r.html5||!1,a._muted=r.mute||!1,a._loop=r.loop||!1,a._pool=r.pool||5,a._preload=typeof r.preload=="boolean"||r.preload==="metadata"?r.preload:!0,a._rate=r.rate||1,a._sprite=r.sprite||{},a._src=typeof r.src!="string"?r.src:[r.src],a._volume=r.volume!==void 0?r.volume:1,a._xhr={method:r.xhr&&r.xhr.method?r.xhr.method:"GET",headers:r.xhr&&r.xhr.headers?r.xhr.headers:null,withCredentials:r.xhr&&r.xhr.withCredentials?r.xhr.withCredentials:!1},a._duration=0,a._state="unloaded",a._sounds=[],a._endTimers={},a._queue=[],a._playLock=!1,a._onend=r.onend?[{fn:r.onend}]:[],a._onfade=r.onfade?[{fn:r.onfade}]:[],a._onload=r.onload?[{fn:r.onload}]:[],a._onloaderror=r.onloaderror?[{fn:r.onloaderror}]:[],a._onplayerror=r.onplayerror?[{fn:r.onplayerror}]:[],a._onpause=r.onpause?[{fn:r.onpause}]:[],a._onplay=r.onplay?[{fn:r.onplay}]:[],a._onstop=r.onstop?[{fn:r.onstop}]:[],a._onmute=r.onmute?[{fn:r.onmute}]:[],a._onvolume=r.onvolume?[{fn:r.onvolume}]:[],a._onrate=r.onrate?[{fn:r.onrate}]:[],a._onseek=r.onseek?[{fn:r.onseek}]:[],a._onunlock=r.onunlock?[{fn:r.onunlock}]:[],a._onresume=[],a._webAudio=t.usingWebAudio&&!a._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(a),a._autoplay&&a._queue.push({event:"play",action:function(){a.play()}}),a._preload&&a._preload!=="none"&&a.load(),a},load:function(){var r=this,a=null;if(t.noAudio){r._emit("loaderror",null,"No audio support.");return}typeof r._src=="string"&&(r._src=[r._src]);for(var c=0;c<r._src.length;c++){var d,u;if(r._format&&r._format[c])d=r._format[c];else{if(u=r._src[c],typeof u!="string"){r._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}d=/^data:audio\/([^;,]+);/i.exec(u),d||(d=/\.([^.]+)$/.exec(u.split("?",1)[0])),d&&(d=d[1].toLowerCase())}if(d||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),d&&t.codecs(d)){a=r._src[c];break}}if(!a){r._emit("loaderror",null,"No codec support for selected audio sources.");return}return r._src=a,r._state="loading",window.location.protocol==="https:"&&a.slice(0,5)==="http:"&&(r._html5=!0,r._webAudio=!1),new i(r),r._webAudio&&o(r),r},play:function(r,a){var c=this,d=null;if(typeof r=="number")d=r,r=null;else{if(typeof r=="string"&&c._state==="loaded"&&!c._sprite[r])return null;if(typeof r>"u"&&(r="__default",!c._playLock)){for(var u=0,v=0;v<c._sounds.length;v++)c._sounds[v]._paused&&!c._sounds[v]._ended&&(u++,d=c._sounds[v]._id);u===1?r=null:d=null}}var f=d?c._soundById(d):c._inactiveSound();if(!f)return null;if(d&&!r&&(r=f._sprite||"__default"),c._state!=="loaded"){f._sprite=r,f._ended=!1;var m=f._id;return c._queue.push({event:"play",action:function(){c.play(m)}}),m}if(d&&!f._paused)return a||c._loadQueue("play"),f._id;c._webAudio&&t._autoResume();var x=Math.max(0,f._seek>0?f._seek:c._sprite[r][0]/1e3),y=Math.max(0,(c._sprite[r][0]+c._sprite[r][1])/1e3-x),w=y*1e3/Math.abs(f._rate),b=c._sprite[r][0]/1e3,M=(c._sprite[r][0]+c._sprite[r][1])/1e3;f._sprite=r,f._ended=!1;var L=function(){f._paused=!1,f._seek=x,f._start=b,f._stop=M,f._loop=!!(f._loop||c._sprite[r][2])};if(x>=M){c._ended(f);return}var A=f._node;if(c._webAudio){var E=function(){c._playLock=!1,L(),c._refreshBuffer(f);var P=f._muted||c._muted?0:f._volume;A.gain.setValueAtTime(P,t.ctx.currentTime),f._playStart=t.ctx.currentTime,typeof A.bufferSource.start>"u"?f._loop?A.bufferSource.noteGrainOn(0,x,86400):A.bufferSource.noteGrainOn(0,x,y):f._loop?A.bufferSource.start(0,x,86400):A.bufferSource.start(0,x,y),w!==1/0&&(c._endTimers[f._id]=setTimeout(c._ended.bind(c,f),w)),a||setTimeout(function(){c._emit("play",f._id),c._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?E():(c._playLock=!0,c.once("resume",E),c._clearTimer(f._id))}else{var O=function(){A.currentTime=x,A.muted=f._muted||c._muted||t._muted||A.muted,A.volume=f._volume*t.volume(),A.playbackRate=f._rate;try{var P=A.play();if(P&&typeof Promise<"u"&&(P instanceof Promise||typeof P.then=="function")?(c._playLock=!0,L(),P.then(function(){c._playLock=!1,A._unlocked=!0,a?c._loadQueue():c._emit("play",f._id)}).catch(function(){c._playLock=!1,c._emit("playerror",f._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),f._ended=!0,f._paused=!0})):a||(c._playLock=!1,L(),c._emit("play",f._id)),A.playbackRate=f._rate,A.paused){c._emit("playerror",f._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}r!=="__default"||f._loop?c._endTimers[f._id]=setTimeout(c._ended.bind(c,f),w):(c._endTimers[f._id]=function(){c._ended(f),A.removeEventListener("ended",c._endTimers[f._id],!1)},A.addEventListener("ended",c._endTimers[f._id],!1))}catch(I){c._emit("playerror",f._id,I)}};A.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(A.src=c._src,A.load());var F=window&&window.ejecta||!A.readyState&&t._navigator.isCocoonJS;if(A.readyState>=3||F)O();else{c._playLock=!0,c._state="loading";var R=function(){c._state="loaded",O(),A.removeEventListener(t._canPlayEvent,R,!1)};A.addEventListener(t._canPlayEvent,R,!1),c._clearTimer(f._id)}}return f._id},pause:function(r){var a=this;if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"pause",action:function(){a.pause(r)}}),a;for(var c=a._getSoundIds(r),d=0;d<c.length;d++){a._clearTimer(c[d]);var u=a._soundById(c[d]);if(u&&!u._paused&&(u._seek=a.seek(c[d]),u._rateSeek=0,u._paused=!0,a._stopFade(c[d]),u._node))if(a._webAudio){if(!u._node.bufferSource)continue;typeof u._node.bufferSource.stop>"u"?u._node.bufferSource.noteOff(0):u._node.bufferSource.stop(0),a._cleanBuffer(u._node)}else(!isNaN(u._node.duration)||u._node.duration===1/0)&&u._node.pause();arguments[1]||a._emit("pause",u?u._id:null)}return a},stop:function(r,a){var c=this;if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"stop",action:function(){c.stop(r)}}),c;for(var d=c._getSoundIds(r),u=0;u<d.length;u++){c._clearTimer(d[u]);var v=c._soundById(d[u]);v&&(v._seek=v._start||0,v._rateSeek=0,v._paused=!0,v._ended=!0,c._stopFade(d[u]),v._node&&(c._webAudio?v._node.bufferSource&&(typeof v._node.bufferSource.stop>"u"?v._node.bufferSource.noteOff(0):v._node.bufferSource.stop(0),c._cleanBuffer(v._node)):(!isNaN(v._node.duration)||v._node.duration===1/0)&&(v._node.currentTime=v._start||0,v._node.pause(),v._node.duration===1/0&&c._clearSound(v._node))),a||c._emit("stop",v._id))}return c},mute:function(r,a){var c=this;if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"mute",action:function(){c.mute(r,a)}}),c;if(typeof a>"u")if(typeof r=="boolean")c._muted=r;else return c._muted;for(var d=c._getSoundIds(a),u=0;u<d.length;u++){var v=c._soundById(d[u]);v&&(v._muted=r,v._interval&&c._stopFade(v._id),c._webAudio&&v._node?v._node.gain.setValueAtTime(r?0:v._volume,t.ctx.currentTime):v._node&&(v._node.muted=t._muted?!0:r),c._emit("mute",v._id))}return c},volume:function(){var r=this,a=arguments,c,d;if(a.length===0)return r._volume;if(a.length===1||a.length===2&&typeof a[1]>"u"){var u=r._getSoundIds(),v=u.indexOf(a[0]);v>=0?d=parseInt(a[0],10):c=parseFloat(a[0])}else a.length>=2&&(c=parseFloat(a[0]),d=parseInt(a[1],10));var f;if(typeof c<"u"&&c>=0&&c<=1){if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,a)}}),r;typeof d>"u"&&(r._volume=c),d=r._getSoundIds(d);for(var m=0;m<d.length;m++)f=r._soundById(d[m]),f&&(f._volume=c,a[2]||r._stopFade(d[m]),r._webAudio&&f._node&&!f._muted?f._node.gain.setValueAtTime(c,t.ctx.currentTime):f._node&&!f._muted&&(f._node.volume=c*t.volume()),r._emit("volume",f._id))}else return f=d?r._soundById(d):r._sounds[0],f?f._volume:0;return r},fade:function(r,a,c,d){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"fade",action:function(){u.fade(r,a,c,d)}}),u;r=Math.min(Math.max(0,parseFloat(r)),1),a=Math.min(Math.max(0,parseFloat(a)),1),c=parseFloat(c),u.volume(r,d);for(var v=u._getSoundIds(d),f=0;f<v.length;f++){var m=u._soundById(v[f]);if(m){if(d||u._stopFade(v[f]),u._webAudio&&!m._muted){var x=t.ctx.currentTime,y=x+c/1e3;m._volume=r,m._node.gain.setValueAtTime(r,x),m._node.gain.linearRampToValueAtTime(a,y)}u._startFadeInterval(m,r,a,c,v[f],typeof d>"u")}}return u},_startFadeInterval:function(r,a,c,d,u,v){var f=this,m=a,x=c-a,y=Math.abs(x/.01),w=Math.max(4,y>0?d/y:d),b=Date.now();r._fadeTo=c,r._interval=setInterval(function(){var M=(Date.now()-b)/d;b=Date.now(),m+=x*M,m=Math.round(m*100)/100,x<0?m=Math.max(c,m):m=Math.min(c,m),f._webAudio?r._volume=m:f.volume(m,r._id,!0),v&&(f._volume=m),(c<a&&m<=c||c>a&&m>=c)&&(clearInterval(r._interval),r._interval=null,r._fadeTo=null,f.volume(c,r._id),f._emit("fade",r._id))},w)},_stopFade:function(r){var a=this,c=a._soundById(r);return c&&c._interval&&(a._webAudio&&c._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(c._interval),c._interval=null,a.volume(c._fadeTo,r),c._fadeTo=null,a._emit("fade",r)),a},loop:function(){var r=this,a=arguments,c,d,u;if(a.length===0)return r._loop;if(a.length===1)if(typeof a[0]=="boolean")c=a[0],r._loop=c;else return u=r._soundById(parseInt(a[0],10)),u?u._loop:!1;else a.length===2&&(c=a[0],d=parseInt(a[1],10));for(var v=r._getSoundIds(d),f=0;f<v.length;f++)u=r._soundById(v[f]),u&&(u._loop=c,r._webAudio&&u._node&&u._node.bufferSource&&(u._node.bufferSource.loop=c,c&&(u._node.bufferSource.loopStart=u._start||0,u._node.bufferSource.loopEnd=u._stop,r.playing(v[f])&&(r.pause(v[f],!0),r.play(v[f],!0)))));return r},rate:function(){var r=this,a=arguments,c,d;if(a.length===0)d=r._sounds[0]._id;else if(a.length===1){var u=r._getSoundIds(),v=u.indexOf(a[0]);v>=0?d=parseInt(a[0],10):c=parseFloat(a[0])}else a.length===2&&(c=parseFloat(a[0]),d=parseInt(a[1],10));var f;if(typeof c=="number"){if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,a)}}),r;typeof d>"u"&&(r._rate=c),d=r._getSoundIds(d);for(var m=0;m<d.length;m++)if(f=r._soundById(d[m]),f){r.playing(d[m])&&(f._rateSeek=r.seek(d[m]),f._playStart=r._webAudio?t.ctx.currentTime:f._playStart),f._rate=c,r._webAudio&&f._node&&f._node.bufferSource?f._node.bufferSource.playbackRate.setValueAtTime(c,t.ctx.currentTime):f._node&&(f._node.playbackRate=c);var x=r.seek(d[m]),y=(r._sprite[f._sprite][0]+r._sprite[f._sprite][1])/1e3-x,w=y*1e3/Math.abs(f._rate);(r._endTimers[d[m]]||!f._paused)&&(r._clearTimer(d[m]),r._endTimers[d[m]]=setTimeout(r._ended.bind(r,f),w)),r._emit("rate",f._id)}}else return f=r._soundById(d),f?f._rate:r._rate;return r},seek:function(){var r=this,a=arguments,c,d;if(a.length===0)r._sounds.length&&(d=r._sounds[0]._id);else if(a.length===1){var u=r._getSoundIds(),v=u.indexOf(a[0]);v>=0?d=parseInt(a[0],10):r._sounds.length&&(d=r._sounds[0]._id,c=parseFloat(a[0]))}else a.length===2&&(c=parseFloat(a[0]),d=parseInt(a[1],10));if(typeof d>"u")return 0;if(typeof c=="number"&&(r._state!=="loaded"||r._playLock))return r._queue.push({event:"seek",action:function(){r.seek.apply(r,a)}}),r;var f=r._soundById(d);if(f)if(typeof c=="number"&&c>=0){var m=r.playing(d);m&&r.pause(d,!0),f._seek=c,f._ended=!1,r._clearTimer(d),!r._webAudio&&f._node&&!isNaN(f._node.duration)&&(f._node.currentTime=c);var x=function(){m&&r.play(d,!0),r._emit("seek",d)};if(m&&!r._webAudio){var y=function(){r._playLock?setTimeout(y,0):x()};setTimeout(y,0)}else x()}else if(r._webAudio){var w=r.playing(d)?t.ctx.currentTime-f._playStart:0,b=f._rateSeek?f._rateSeek-f._seek:0;return f._seek+(b+w*Math.abs(f._rate))}else return f._node.currentTime;return r},playing:function(r){var a=this;if(typeof r=="number"){var c=a._soundById(r);return c?!c._paused:!1}for(var d=0;d<a._sounds.length;d++)if(!a._sounds[d]._paused)return!0;return!1},duration:function(r){var a=this,c=a._duration,d=a._soundById(r);return d&&(c=a._sprite[d._sprite][1]/1e3),c},state:function(){return this._state},unload:function(){for(var r=this,a=r._sounds,c=0;c<a.length;c++)a[c]._paused||r.stop(a[c]._id),r._webAudio||(r._clearSound(a[c]._node),a[c]._node.removeEventListener("error",a[c]._errorFn,!1),a[c]._node.removeEventListener(t._canPlayEvent,a[c]._loadFn,!1),a[c]._node.removeEventListener("ended",a[c]._endFn,!1),t._releaseHtml5Audio(a[c]._node)),delete a[c]._node,r._clearTimer(a[c]._id);var d=t._howls.indexOf(r);d>=0&&t._howls.splice(d,1);var u=!0;for(c=0;c<t._howls.length;c++)if(t._howls[c]._src===r._src||r._src.indexOf(t._howls[c]._src)>=0){u=!1;break}return s&&u&&delete s[r._src],t.noAudio=!1,r._state="unloaded",r._sounds=[],r=null,null},on:function(r,a,c,d){var u=this,v=u["_on"+r];return typeof a=="function"&&v.push(d?{id:c,fn:a,once:d}:{id:c,fn:a}),u},off:function(r,a,c){var d=this,u=d["_on"+r],v=0;if(typeof a=="number"&&(c=a,a=null),a||c)for(v=0;v<u.length;v++){var f=c===u[v].id;if(a===u[v].fn&&f||!a&&f){u.splice(v,1);break}}else if(r)d["_on"+r]=[];else{var m=Object.keys(d);for(v=0;v<m.length;v++)m[v].indexOf("_on")===0&&Array.isArray(d[m[v]])&&(d[m[v]]=[])}return d},once:function(r,a,c){var d=this;return d.on(r,a,c,1),d},_emit:function(r,a,c){for(var d=this,u=d["_on"+r],v=u.length-1;v>=0;v--)(!u[v].id||u[v].id===a||r==="load")&&(setTimeout(function(f){f.call(this,a,c)}.bind(d,u[v].fn),0),u[v].once&&d.off(r,u[v].fn,u[v].id));return d._loadQueue(r),d},_loadQueue:function(r){var a=this;if(a._queue.length>0){var c=a._queue[0];c.event===r&&(a._queue.shift(),a._loadQueue()),r||c.action()}return a},_ended:function(r){var a=this,c=r._sprite;if(!a._webAudio&&r._node&&!r._node.paused&&!r._node.ended&&r._node.currentTime<r._stop)return setTimeout(a._ended.bind(a,r),100),a;var d=!!(r._loop||a._sprite[c][2]);if(a._emit("end",r._id),!a._webAudio&&d&&a.stop(r._id,!0).play(r._id),a._webAudio&&d){a._emit("play",r._id),r._seek=r._start||0,r._rateSeek=0,r._playStart=t.ctx.currentTime;var u=(r._stop-r._start)*1e3/Math.abs(r._rate);a._endTimers[r._id]=setTimeout(a._ended.bind(a,r),u)}return a._webAudio&&!d&&(r._paused=!0,r._ended=!0,r._seek=r._start||0,r._rateSeek=0,a._clearTimer(r._id),a._cleanBuffer(r._node),t._autoSuspend()),!a._webAudio&&!d&&a.stop(r._id,!0),a},_clearTimer:function(r){var a=this;if(a._endTimers[r]){if(typeof a._endTimers[r]!="function")clearTimeout(a._endTimers[r]);else{var c=a._soundById(r);c&&c._node&&c._node.removeEventListener("ended",a._endTimers[r],!1)}delete a._endTimers[r]}return a},_soundById:function(r){for(var a=this,c=0;c<a._sounds.length;c++)if(r===a._sounds[c]._id)return a._sounds[c];return null},_inactiveSound:function(){var r=this;r._drain();for(var a=0;a<r._sounds.length;a++)if(r._sounds[a]._ended)return r._sounds[a].reset();return new i(r)},_drain:function(){var r=this,a=r._pool,c=0,d=0;if(!(r._sounds.length<a)){for(d=0;d<r._sounds.length;d++)r._sounds[d]._ended&&c++;for(d=r._sounds.length-1;d>=0;d--){if(c<=a)return;r._sounds[d]._ended&&(r._webAudio&&r._sounds[d]._node&&r._sounds[d]._node.disconnect(0),r._sounds.splice(d,1),c--)}}},_getSoundIds:function(r){var a=this;if(typeof r>"u"){for(var c=[],d=0;d<a._sounds.length;d++)c.push(a._sounds[d]._id);return c}else return[r]},_refreshBuffer:function(r){var a=this;return r._node.bufferSource=t.ctx.createBufferSource(),r._node.bufferSource.buffer=s[a._src],r._panner?r._node.bufferSource.connect(r._panner):r._node.bufferSource.connect(r._node),r._node.bufferSource.loop=r._loop,r._loop&&(r._node.bufferSource.loopStart=r._start||0,r._node.bufferSource.loopEnd=r._stop||0),r._node.bufferSource.playbackRate.setValueAtTime(r._rate,t.ctx.currentTime),a},_cleanBuffer:function(r){var a=this,c=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(t._scratchBuffer&&r.bufferSource&&(r.bufferSource.onended=null,r.bufferSource.disconnect(0),c))try{r.bufferSource.buffer=t._scratchBuffer}catch{}return r.bufferSource=null,a},_clearSound:function(r){var a=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);a||(r.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(r){this._parent=r,this.init()};i.prototype={init:function(){var r=this,a=r._parent;return r._muted=a._muted,r._loop=a._loop,r._volume=a._volume,r._rate=a._rate,r._seek=0,r._paused=!0,r._ended=!0,r._sprite="__default",r._id=++t._counter,a._sounds.push(r),r.create(),r},create:function(){var r=this,a=r._parent,c=t._muted||r._muted||r._parent._muted?0:r._volume;return a._webAudio?(r._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),r._node.gain.setValueAtTime(c,t.ctx.currentTime),r._node.paused=!0,r._node.connect(t.masterGain)):t.noAudio||(r._node=t._obtainHtml5Audio(),r._errorFn=r._errorListener.bind(r),r._node.addEventListener("error",r._errorFn,!1),r._loadFn=r._loadListener.bind(r),r._node.addEventListener(t._canPlayEvent,r._loadFn,!1),r._endFn=r._endListener.bind(r),r._node.addEventListener("ended",r._endFn,!1),r._node.src=a._src,r._node.preload=a._preload===!0?"auto":a._preload,r._node.volume=c*t.volume(),r._node.load()),r},reset:function(){var r=this,a=r._parent;return r._muted=a._muted,r._loop=a._loop,r._volume=a._volume,r._rate=a._rate,r._seek=0,r._rateSeek=0,r._paused=!0,r._ended=!0,r._sprite="__default",r._id=++t._counter,r},_errorListener:function(){var r=this;r._parent._emit("loaderror",r._id,r._node.error?r._node.error.code:0),r._node.removeEventListener("error",r._errorFn,!1)},_loadListener:function(){var r=this,a=r._parent;a._duration=Math.ceil(r._node.duration*10)/10,Object.keys(a._sprite).length===0&&(a._sprite={__default:[0,a._duration*1e3]}),a._state!=="loaded"&&(a._state="loaded",a._emit("load"),a._loadQueue()),r._node.removeEventListener(t._canPlayEvent,r._loadFn,!1)},_endListener:function(){var r=this,a=r._parent;a._duration===1/0&&(a._duration=Math.ceil(r._node.duration*10)/10,a._sprite.__default[1]===1/0&&(a._sprite.__default[1]=a._duration*1e3),a._ended(r)),r._node.removeEventListener("ended",r._endFn,!1)}};var s={},o=function(r){var a=r._src;if(s[a]){r._duration=s[a].duration,h(r);return}if(/^data:[^;]+;base64,/.test(a)){for(var c=atob(a.split(",")[1]),d=new Uint8Array(c.length),u=0;u<c.length;++u)d[u]=c.charCodeAt(u);_(d.buffer,r)}else{var v=new XMLHttpRequest;v.open(r._xhr.method,a,!0),v.withCredentials=r._xhr.withCredentials,v.responseType="arraybuffer",r._xhr.headers&&Object.keys(r._xhr.headers).forEach(function(f){v.setRequestHeader(f,r._xhr.headers[f])}),v.onload=function(){var f=(v.status+"")[0];if(f!=="0"&&f!=="2"&&f!=="3"){r._emit("loaderror",null,"Failed loading audio file with status: "+v.status+".");return}_(v.response,r)},v.onerror=function(){r._webAudio&&(r._html5=!0,r._webAudio=!1,r._sounds=[],delete s[a],r.load())},l(v)}},l=function(r){try{r.send()}catch{r.onerror()}},_=function(r,a){var c=function(){a._emit("loaderror",null,"Decoding audio data failed.")},d=function(u){u&&a._sounds.length>0?(s[a._src]=u,h(a,u)):c()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(r).then(d).catch(c):t.ctx.decodeAudioData(r,d,c)},h=function(r,a){a&&!r._duration&&(r._duration=a.duration),Object.keys(r._sprite).length===0&&(r._sprite={__default:[0,r._duration*1e3]}),r._state!=="loaded"&&(r._state="loaded",r._emit("load"),r._loadQueue())},p=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var r=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),a=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),c=a?parseInt(a[1],10):null;if(r&&c&&c<9){var d=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!d&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:t,Howl:n}}),typeof Re<"u"&&(Re.Howler=t,Re.Howl=n),typeof global<"u"?(global.HowlerGlobal=e,global.Howler=t,global.Howl=n,global.Sound=i):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=n,window.Sound=i)})();(function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var i=n._howls.length-1;i>=0;i--)n._howls[i].stereo(t);return n},HowlerGlobal.prototype.pos=function(t,n,i){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(n=typeof n!="number"?s._pos[1]:n,i=typeof i!="number"?s._pos[2]:i,typeof t=="number")s._pos=[t,n,i],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(t,n,i,s,o,l){var _=this;if(!_.ctx||!_.ctx.listener)return _;var h=_._orientation;if(n=typeof n!="number"?h[1]:n,i=typeof i!="number"?h[2]:i,s=typeof s!="number"?h[3]:s,o=typeof o!="number"?h[4]:o,l=typeof l!="number"?h[5]:l,typeof t=="number")_._orientation=[t,n,i,s,o,l],typeof _.ctx.listener.forwardX<"u"?(_.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),_.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),_.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),_.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),_.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),_.ctx.listener.upZ.setTargetAtTime(l,Howler.ctx.currentTime,.1)):_.ctx.listener.setOrientation(t,n,i,s,o,l);else return h;return _},Howl.prototype.init=function(t){return function(n){var i=this;return i._orientation=n.orientation||[1,0,0],i._stereo=n.stereo||null,i._pos=n.pos||null,i._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance<"u"?n.maxDistance:1e4,panningModel:typeof n.panningModel<"u"?n.panningModel:"HRTF",refDistance:typeof n.refDistance<"u"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:1},i._onstereo=n.onstereo?[{fn:n.onstereo}]:[],i._onpos=n.onpos?[{fn:n.onpos}]:[],i._onorientation=n.onorientation?[{fn:n.onorientation}]:[],t.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(t,n)}}),i;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof n>"u")if(typeof t=="number")i._stereo=t,i._pos=[t,0,0];else return i._stereo;for(var o=i._getSoundIds(n),l=0;l<o.length;l++){var _=i._soundById(o[l]);if(_)if(typeof t=="number")_._stereo=t,_._pos=[t,0,0],_._node&&(_._pannerAttr.panningModel="equalpower",(!_._panner||!_._panner.pan)&&e(_,s),s==="spatial"?typeof _._panner.positionX<"u"?(_._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),_._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),_._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):_._panner.setPosition(t,0,0):_._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),i._emit("stereo",_._id);else return _._stereo}return i},Howl.prototype.pos=function(t,n,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(t,n,i,s)}}),o;if(n=typeof n!="number"?0:n,i=typeof i!="number"?-.5:i,typeof s>"u")if(typeof t=="number")o._pos=[t,n,i];else return o._pos;for(var l=o._getSoundIds(s),_=0;_<l.length;_++){var h=o._soundById(l[_]);if(h)if(typeof t=="number")h._pos=[t,n,i],h._node&&((!h._panner||h._panner.pan)&&e(h,"spatial"),typeof h._panner.positionX<"u"?(h._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):h._panner.setPosition(t,n,i)),o._emit("pos",h._id);else return h._pos}return o},Howl.prototype.orientation=function(t,n,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(t,n,i,s)}}),o;if(n=typeof n!="number"?o._orientation[1]:n,i=typeof i!="number"?o._orientation[2]:i,typeof s>"u")if(typeof t=="number")o._orientation=[t,n,i];else return o._orientation;for(var l=o._getSoundIds(s),_=0;_<l.length;_++){var h=o._soundById(l[_]);if(h)if(typeof t=="number")h._orientation=[t,n,i],h._node&&(h._panner||(h._pos||(h._pos=o._pos||[0,0,-.5]),e(h,"spatial")),typeof h._panner.orientationX<"u"?(h._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),h._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):h._panner.setOrientation(t,n,i)),o._emit("orientation",h._id);else return h._orientation}return o},Howl.prototype.pannerAttr=function(){var t=this,n=arguments,i,s,o;if(!t._webAudio)return t;if(n.length===0)return t._pannerAttr;if(n.length===1)if(typeof n[0]=="object")i=n[0],typeof s>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),t._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:t._panningModel});else return o=t._soundById(parseInt(n[0],10)),o?o._pannerAttr:t._pannerAttr;else n.length===2&&(i=n[0],s=parseInt(n[1],10));for(var l=t._getSoundIds(s),_=0;_<l.length;_++)if(o=t._soundById(l[_]),o){var h=o._pannerAttr;h={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:h.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:h.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:h.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:h.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:h.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:h.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:h.panningModel};var p=o._panner;p?(p.coneInnerAngle=h.coneInnerAngle,p.coneOuterAngle=h.coneOuterAngle,p.coneOuterGain=h.coneOuterGain,p.distanceModel=h.distanceModel,p.maxDistance=h.maxDistance,p.refDistance=h.refDistance,p.rolloffFactor=h.rolloffFactor,p.panningModel=h.panningModel):(o._pos||(o._pos=t._pos||[0,0,-.5]),e(o,"spatial"))}return t},Sound.prototype.init=function(t){return function(){var n=this,i=n._parent;n._orientation=i._orientation,n._stereo=i._stereo,n._pos=i._pos,n._pannerAttr=i._pannerAttr,t.call(this),n._stereo?i.stereo(n._stereo):n._pos&&i.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var n=this,i=n._parent;return n._orientation=i._orientation,n._stereo=i._stereo,n._pos=i._pos,n._pannerAttr=i._pannerAttr,n._stereo?i.stereo(n._stereo):n._pos?i.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,i._refreshBuffer(n)),t.call(this)}}(Sound.prototype.reset);var e=function(t,n){n=n||"spatial",n==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()});var ps={};var Bs,gn=C(()=>{Bs=ot(rt());WL.registerComponent("howler-audio-listener",{spatial:{type:WL.Type.Bool,default:!0}},{init:function(){this.origin=new Float32Array(3),this.fwd=new Float32Array(3),this.up=new Float32Array(3)},update:function(){this.spatial&&(this.object.getTranslationWorld(this.origin),this.object.getForward(this.fwd),this.object.getUp(this.up),Howler.pos(this.origin[0],this.origin[1],this.origin[2]),Howler.orientation(this.fwd[0],this.fwd[1],this.fwd[2],this.up[0],this.up[1],this.up[2]))}})});var us={};var xn,yn=C(()=>{xn=ot(rt());WL.registerComponent("howler-audio-source",{volume:{type:WL.Type.Float,default:1},spatial:{type:WL.Type.Bool,default:!0},loop:{type:WL.Type.Bool,default:!1},autoplay:{type:WL.Type.Bool,default:!1},src:{type:WL.Type.String,default:""}},{start:function(){this.audio=new xn.Howl({src:[this.src],loop:this.loop,volume:this.volume,autoplay:this.autoplay}),this.lastPlayedAudioId=null,this.origin=new Float32Array(3),this.lastOrigin=new Float32Array(3),this.spatial&&this.autoplay&&(this.updatePosition(),this.play());let e=()=>{this.stop();let t=WL.onSceneLoaded.indexOf(e);t>=0&&WL.onSceneLoaded.splice(t,1)};WL.onSceneLoaded.push(e)},update:function(){!this.spatial||!this.lastPlayedAudioId||(this.object.getTranslationWorld(this.origin),(Math.abs(this.lastOrigin[0]-this.origin[0])>.005||Math.abs(this.lastOrigin[1]-this.origin[1])>.005||Math.abs(this.lastOrigin[2]-this.origin[2])>.005)&&this.updatePosition())},updatePosition:function(){this.audio.pos(this.origin[0],this.origin[1],this.origin[2],this.lastPlayedAudioId),this.lastOrigin.set(this.origin)},play:function(){this.lastPlayedAudioId&&this.audio.stop(this.lastPlayedAudioId),this.lastPlayedAudioId=this.audio.play(),this.spatial&&this.updatePosition()},stop:function(){this.lastPlayedAudioId&&(this.audio.stop(this.lastPlayedAudioId),this.lastPlayedAudioId=null)}})});var wn=ee(()=>{WL.registerComponent("button",{buttonMeshObject:{type:WL.Type.Object},hoverMaterial:{type:WL.Type.Material}},{start:function(){this.mesh=this.buttonMeshObject.getComponent("mesh"),this.defaultMaterial=this.mesh.material,this.target=this.object.getComponent("cursor-target"),this.target.addHoverFunction(this.onHover.bind(this)),this.target.addUnHoverFunction(this.onUnHover.bind(this)),this.target.addDownFunction(this.onDown.bind(this)),this.target.addUpFunction(this.onUp.bind(this)),this.soundClick=this.object.addComponent("howler-audio-source",{src:"sfx/click.wav",spatial:!0}),this.soundUnClick=this.object.addComponent("howler-audio-source",{src:"sfx/unclick.wav",spatial:!0})},onHover:function(e,t){this.mesh.material=this.hoverMaterial,t.type=="finger-cursor"&&this.onDown(e,t),this.hapticFeedback(t.object,.5,50)},onDown:function(e,t){this.soundClick.play(),this.buttonMeshObject.translate([0,-.1,0]),this.hapticFeedback(t.object,1,20)},onUp:function(e,t){this.soundUnClick.play(),this.buttonMeshObject.translate([0,.1,0]),this.hapticFeedback(t.object,.7,20)},onUnHover:function(e,t){this.mesh.material=this.defaultMaterial,t.type=="finger-cursor"&&this.onUp(e,t),this.hapticFeedback(t.object,.3,50)},hapticFeedback:function(e,t,n){let i=e.getComponent("input");if(i&&i.xrInputSource){let s=i.xrInputSource.gamepad;s&&s.hapticActuators&&s.hapticActuators[0].pulse(t,n)}}})});var bn={};le(bn,{SecondTestComponent:()=>me});var me,Mn=C(()=>{Ye();me=class extends H{start(){console.log(this.test),this._mesh=this.object.getComponent("mesh");let n=this._mesh.material.clone();this._mesh.material=n,n.diffuseColor=[1,1,1,1],n.ambientColor=[0,0,0,1],n.specularColor=[1,0,0,1]}};me.TypeName="second",me.Properties={test:{type:D.Int,default:1}}});Ye();wt();bt();dn();fn();pn();un();vn();mn();gn();yn();wn();var vs=(Mn(),$(bn));WL.registerComponent(vs.SecondTestComponent);})();
/*! Bundled license information:

howler/dist/howler.js:
  (*!
   *  howler.js v2.2.3
   *  howlerjs.com
   *
   *  (c) 2013-2020, James Simpson of GoldFire Studios
   *  goldfirestudios.com
   *
   *  MIT License
   *)
  (*!
   *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
   *  
   *  howler.js v2.2.3
   *  howlerjs.com
   *
   *  (c) 2013-2020, James Simpson of GoldFire Studios
   *  goldfirestudios.com
   *
   *  MIT License
   *)
*/
//# sourceMappingURL=wonderbrick-bundle.js.map
